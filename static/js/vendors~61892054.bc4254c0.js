(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{101:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, "a", function() { return /* binding */ Integrations; });\n\n// UNUSED EXPORTS: Span, Transaction, registerRequestInstrumentation, defaultRequestInstrumentationOptions, SpanStatus, IdleTransaction, startIdleTransaction, addExtensionMethods, extractTraceparentData, getActiveTransaction, hasTracingEnabled, stripUrlQueryAndFragment, TRACEPARENT_REGEXP\n\n// NAMESPACE OBJECT: ./node_modules/@sentry/tracing/esm/integrations/index.js\nvar integrations_namespaceObject = {};\n__webpack_require__.r(integrations_namespaceObject);\n__webpack_require__.d(integrations_namespaceObject, "Express", function() { return express_Express; });\n__webpack_require__.d(integrations_namespaceObject, "Postgres", function() { return postgres["a" /* Postgres */]; });\n__webpack_require__.d(integrations_namespaceObject, "Mysql", function() { return mysql["a" /* Mysql */]; });\n__webpack_require__.d(integrations_namespaceObject, "Mongo", function() { return mongo["a" /* Mongo */]; });\n\n// EXTERNAL MODULE: ./node_modules/tslib/tslib.es6.js\nvar tslib_es6 = __webpack_require__(0);\n\n// EXTERNAL MODULE: ./node_modules/@sentry/tracing/esm/browser/browsertracing.js + 14 modules\nvar browsertracing = __webpack_require__(143);\n\n// EXTERNAL MODULE: ./node_modules/@sentry/tracing/esm/hubextensions.js\nvar hubextensions = __webpack_require__(46);\n\n// EXTERNAL MODULE: ./node_modules/@sentry/utils/esm/logger.js\nvar logger = __webpack_require__(5);\n\n// CONCATENATED MODULE: ./node_modules/@sentry/tracing/esm/integrations/express.js\n\n\n/**\n * Express integration\n *\n * Provides an request and error handler for Express framework as well as tracing capabilities\n */\nvar express_Express = /** @class */ (function () {\n    /**\n     * @inheritDoc\n     */\n    function Express(options) {\n        if (options === void 0) { options = {}; }\n        /**\n         * @inheritDoc\n         */\n        this.name = Express.id;\n        this._router = options.router || options.app;\n        this._methods = (Array.isArray(options.methods) ? options.methods : []).concat(\'use\');\n    }\n    /**\n     * @inheritDoc\n     */\n    Express.prototype.setupOnce = function () {\n        if (!this._router) {\n            logger["a" /* logger */].error(\'ExpressIntegration is missing an Express instance\');\n            return;\n        }\n        instrumentMiddlewares(this._router, this._methods);\n    };\n    /**\n     * @inheritDoc\n     */\n    Express.id = \'Express\';\n    return Express;\n}());\n\n/**\n * Wraps original middleware function in a tracing call, which stores the info about the call as a span,\n * and finishes it once the middleware is done invoking.\n *\n * Express middlewares have 3 various forms, thus we have to take care of all of them:\n * // sync\n * app.use(function (req, res) { ... })\n * // async\n * app.use(function (req, res, next) { ... })\n * // error handler\n * app.use(function (err, req, res, next) { ... })\n *\n * They all internally delegate to the `router[method]` of the given application instance.\n */\n// eslint-disable-next-line @typescript-eslint/ban-types, @typescript-eslint/no-explicit-any\nfunction wrap(fn, method) {\n    var arity = fn.length;\n    switch (arity) {\n        case 2: {\n            return function (req, res) {\n                var transaction = res.__sentry_transaction;\n                if (transaction) {\n                    var span_1 = transaction.startChild({\n                        description: fn.name,\n                        op: "middleware." + method,\n                    });\n                    res.once(\'finish\', function () {\n                        span_1.finish();\n                    });\n                }\n                return fn.call(this, req, res);\n            };\n        }\n        case 3: {\n            return function (req, res, next) {\n                var _a;\n                var transaction = res.__sentry_transaction;\n                var span = (_a = transaction) === null || _a === void 0 ? void 0 : _a.startChild({\n                    description: fn.name,\n                    op: "middleware." + method,\n                });\n                fn.call(this, req, res, function () {\n                    var args = [];\n                    for (var _i = 0; _i < arguments.length; _i++) {\n                        args[_i] = arguments[_i];\n                    }\n                    var _a;\n                    (_a = span) === null || _a === void 0 ? void 0 : _a.finish();\n                    next.call.apply(next, Object(tslib_es6["g" /* __spread */])([this], args));\n                });\n            };\n        }\n        case 4: {\n            return function (err, req, res, next) {\n                var _a;\n                var transaction = res.__sentry_transaction;\n                var span = (_a = transaction) === null || _a === void 0 ? void 0 : _a.startChild({\n                    description: fn.name,\n                    op: "middleware." + method,\n                });\n                fn.call(this, err, req, res, function () {\n                    var args = [];\n                    for (var _i = 0; _i < arguments.length; _i++) {\n                        args[_i] = arguments[_i];\n                    }\n                    var _a;\n                    (_a = span) === null || _a === void 0 ? void 0 : _a.finish();\n                    next.call.apply(next, Object(tslib_es6["g" /* __spread */])([this], args));\n                });\n            };\n        }\n        default: {\n            throw new Error("Express middleware takes 2-4 arguments. Got: " + arity);\n        }\n    }\n}\n/**\n * Takes all the function arguments passed to the original `app` or `router` method, eg. `app.use` or `router.use`\n * and wraps every function, as well as array of functions with a call to our `wrap` method.\n * We have to take care of the arrays as well as iterate over all of the arguments,\n * as `app.use` can accept middlewares in few various forms.\n *\n * app.use([<path>], <fn>)\n * app.use([<path>], <fn>, ...<fn>)\n * app.use([<path>], ...<fn>[])\n */\nfunction wrapMiddlewareArgs(args, method) {\n    return args.map(function (arg) {\n        if (typeof arg === \'function\') {\n            return wrap(arg, method);\n        }\n        if (Array.isArray(arg)) {\n            return arg.map(function (a) {\n                if (typeof a === \'function\') {\n                    return wrap(a, method);\n                }\n                return a;\n            });\n        }\n        return arg;\n    });\n}\n/**\n * Patches original router to utilize our tracing functionality\n */\nfunction patchMiddleware(router, method) {\n    var originalCallback = router[method];\n    router[method] = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return originalCallback.call.apply(originalCallback, Object(tslib_es6["g" /* __spread */])([this], wrapMiddlewareArgs(args, method)));\n    };\n    return router;\n}\n/**\n * Patches original router methods\n */\nfunction instrumentMiddlewares(router, methods) {\n    if (methods === void 0) { methods = []; }\n    methods.forEach(function (method) { return patchMiddleware(router, method); });\n}\n//# sourceMappingURL=express.js.map\n// EXTERNAL MODULE: ./node_modules/@sentry/tracing/esm/integrations/postgres.js\nvar postgres = __webpack_require__(89);\n\n// EXTERNAL MODULE: ./node_modules/@sentry/tracing/esm/integrations/mysql.js\nvar mysql = __webpack_require__(90);\n\n// EXTERNAL MODULE: ./node_modules/@sentry/tracing/esm/integrations/mongo.js\nvar mongo = __webpack_require__(91);\n\n// CONCATENATED MODULE: ./node_modules/@sentry/tracing/esm/integrations/index.js\n\n\n\n\n//# sourceMappingURL=index.js.map\n// CONCATENATED MODULE: ./node_modules/@sentry/tracing/esm/index.js\n\n\n\n\nvar Integrations = Object(tslib_es6["a" /* __assign */])(Object(tslib_es6["a" /* __assign */])({}, integrations_namespaceObject), { BrowserTracing: browsertracing["a" /* BrowserTracing */] });\n\n\n\n\n\n\n\n// We are patching the global object with our hub extension methods\nObject(hubextensions["a" /* addExtensionMethods */])();\n\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BzZW50cnkvdHJhY2luZy9lc20vaW50ZWdyYXRpb25zL2V4cHJlc3MuanM/ZmQ5OCIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHNlbnRyeS90cmFjaW5nL2VzbS9pbnRlZ3JhdGlvbnMvaW5kZXguanM/NWEzMiIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHNlbnRyeS90cmFjaW5nL2VzbS9pbmRleC5qcz82ODhkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fcmVhZCwgX19zcHJlYWQgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJ0BzZW50cnkvdXRpbHMnO1xuLyoqXG4gKiBFeHByZXNzIGludGVncmF0aW9uXG4gKlxuICogUHJvdmlkZXMgYW4gcmVxdWVzdCBhbmQgZXJyb3IgaGFuZGxlciBmb3IgRXhwcmVzcyBmcmFtZXdvcmsgYXMgd2VsbCBhcyB0cmFjaW5nIGNhcGFiaWxpdGllc1xuICovXG52YXIgRXhwcmVzcyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBAaW5oZXJpdERvY1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIEV4cHJlc3Mob3B0aW9ucykge1xuICAgICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7IG9wdGlvbnMgPSB7fTsgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQGluaGVyaXREb2NcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubmFtZSA9IEV4cHJlc3MuaWQ7XG4gICAgICAgIHRoaXMuX3JvdXRlciA9IG9wdGlvbnMucm91dGVyIHx8IG9wdGlvbnMuYXBwO1xuICAgICAgICB0aGlzLl9tZXRob2RzID0gKEFycmF5LmlzQXJyYXkob3B0aW9ucy5tZXRob2RzKSA/IG9wdGlvbnMubWV0aG9kcyA6IFtdKS5jb25jYXQoJ3VzZScpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW5oZXJpdERvY1xuICAgICAqL1xuICAgIEV4cHJlc3MucHJvdG90eXBlLnNldHVwT25jZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9yb3V0ZXIpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRXhwcmVzc0ludGVncmF0aW9uIGlzIG1pc3NpbmcgYW4gRXhwcmVzcyBpbnN0YW5jZScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGluc3RydW1lbnRNaWRkbGV3YXJlcyh0aGlzLl9yb3V0ZXIsIHRoaXMuX21ldGhvZHMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGluaGVyaXREb2NcbiAgICAgKi9cbiAgICBFeHByZXNzLmlkID0gJ0V4cHJlc3MnO1xuICAgIHJldHVybiBFeHByZXNzO1xufSgpKTtcbmV4cG9ydCB7IEV4cHJlc3MgfTtcbi8qKlxuICogV3JhcHMgb3JpZ2luYWwgbWlkZGxld2FyZSBmdW5jdGlvbiBpbiBhIHRyYWNpbmcgY2FsbCwgd2hpY2ggc3RvcmVzIHRoZSBpbmZvIGFib3V0IHRoZSBjYWxsIGFzIGEgc3BhbixcbiAqIGFuZCBmaW5pc2hlcyBpdCBvbmNlIHRoZSBtaWRkbGV3YXJlIGlzIGRvbmUgaW52b2tpbmcuXG4gKlxuICogRXhwcmVzcyBtaWRkbGV3YXJlcyBoYXZlIDMgdmFyaW91cyBmb3JtcywgdGh1cyB3ZSBoYXZlIHRvIHRha2UgY2FyZSBvZiBhbGwgb2YgdGhlbTpcbiAqIC8vIHN5bmNcbiAqIGFwcC51c2UoZnVuY3Rpb24gKHJlcSwgcmVzKSB7IC4uLiB9KVxuICogLy8gYXN5bmNcbiAqIGFwcC51c2UoZnVuY3Rpb24gKHJlcSwgcmVzLCBuZXh0KSB7IC4uLiB9KVxuICogLy8gZXJyb3IgaGFuZGxlclxuICogYXBwLnVzZShmdW5jdGlvbiAoZXJyLCByZXEsIHJlcywgbmV4dCkgeyAuLi4gfSlcbiAqXG4gKiBUaGV5IGFsbCBpbnRlcm5hbGx5IGRlbGVnYXRlIHRvIHRoZSBgcm91dGVyW21ldGhvZF1gIG9mIHRoZSBnaXZlbiBhcHBsaWNhdGlvbiBpbnN0YW5jZS5cbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHlwZXMsIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmZ1bmN0aW9uIHdyYXAoZm4sIG1ldGhvZCkge1xuICAgIHZhciBhcml0eSA9IGZuLmxlbmd0aDtcbiAgICBzd2l0Y2ggKGFyaXR5KSB7XG4gICAgICAgIGNhc2UgMjoge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChyZXEsIHJlcykge1xuICAgICAgICAgICAgICAgIHZhciB0cmFuc2FjdGlvbiA9IHJlcy5fX3NlbnRyeV90cmFuc2FjdGlvbjtcbiAgICAgICAgICAgICAgICBpZiAodHJhbnNhY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNwYW5fMSA9IHRyYW5zYWN0aW9uLnN0YXJ0Q2hpbGQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGZuLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBvcDogXCJtaWRkbGV3YXJlLlwiICsgbWV0aG9kLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmVzLm9uY2UoJ2ZpbmlzaCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwYW5fMS5maW5pc2goKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBmbi5jYWxsKHRoaXMsIHJlcSwgcmVzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAzOiB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHJlcSwgcmVzLCBuZXh0KSB7XG4gICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgIHZhciB0cmFuc2FjdGlvbiA9IHJlcy5fX3NlbnRyeV90cmFuc2FjdGlvbjtcbiAgICAgICAgICAgICAgICB2YXIgc3BhbiA9IChfYSA9IHRyYW5zYWN0aW9uKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc3RhcnRDaGlsZCh7XG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBmbi5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBvcDogXCJtaWRkbGV3YXJlLlwiICsgbWV0aG9kLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGZuLmNhbGwodGhpcywgcmVxLCByZXMsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgICAgIChfYSA9IHNwYW4pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5maW5pc2goKTtcbiAgICAgICAgICAgICAgICAgICAgbmV4dC5jYWxsLmFwcGx5KG5leHQsIF9fc3ByZWFkKFt0aGlzXSwgYXJncykpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIDQ6IHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZXJyLCByZXEsIHJlcywgbmV4dCkge1xuICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICB2YXIgdHJhbnNhY3Rpb24gPSByZXMuX19zZW50cnlfdHJhbnNhY3Rpb247XG4gICAgICAgICAgICAgICAgdmFyIHNwYW4gPSAoX2EgPSB0cmFuc2FjdGlvbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnN0YXJ0Q2hpbGQoe1xuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZm4ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgb3A6IFwibWlkZGxld2FyZS5cIiArIG1ldGhvZCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBmbi5jYWxsKHRoaXMsIGVyciwgcmVxLCByZXMsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgICAgIChfYSA9IHNwYW4pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5maW5pc2goKTtcbiAgICAgICAgICAgICAgICAgICAgbmV4dC5jYWxsLmFwcGx5KG5leHQsIF9fc3ByZWFkKFt0aGlzXSwgYXJncykpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFeHByZXNzIG1pZGRsZXdhcmUgdGFrZXMgMi00IGFyZ3VtZW50cy4gR290OiBcIiArIGFyaXR5KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogVGFrZXMgYWxsIHRoZSBmdW5jdGlvbiBhcmd1bWVudHMgcGFzc2VkIHRvIHRoZSBvcmlnaW5hbCBgYXBwYCBvciBgcm91dGVyYCBtZXRob2QsIGVnLiBgYXBwLnVzZWAgb3IgYHJvdXRlci51c2VgXG4gKiBhbmQgd3JhcHMgZXZlcnkgZnVuY3Rpb24sIGFzIHdlbGwgYXMgYXJyYXkgb2YgZnVuY3Rpb25zIHdpdGggYSBjYWxsIHRvIG91ciBgd3JhcGAgbWV0aG9kLlxuICogV2UgaGF2ZSB0byB0YWtlIGNhcmUgb2YgdGhlIGFycmF5cyBhcyB3ZWxsIGFzIGl0ZXJhdGUgb3ZlciBhbGwgb2YgdGhlIGFyZ3VtZW50cyxcbiAqIGFzIGBhcHAudXNlYCBjYW4gYWNjZXB0IG1pZGRsZXdhcmVzIGluIGZldyB2YXJpb3VzIGZvcm1zLlxuICpcbiAqIGFwcC51c2UoWzxwYXRoPl0sIDxmbj4pXG4gKiBhcHAudXNlKFs8cGF0aD5dLCA8Zm4+LCAuLi48Zm4+KVxuICogYXBwLnVzZShbPHBhdGg+XSwgLi4uPGZuPltdKVxuICovXG5mdW5jdGlvbiB3cmFwTWlkZGxld2FyZUFyZ3MoYXJncywgbWV0aG9kKSB7XG4gICAgcmV0dXJuIGFyZ3MubWFwKGZ1bmN0aW9uIChhcmcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBhcmcgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiB3cmFwKGFyZywgbWV0aG9kKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcmcpKSB7XG4gICAgICAgICAgICByZXR1cm4gYXJnLm1hcChmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd3JhcChhLCBtZXRob2QpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gYTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcmc7XG4gICAgfSk7XG59XG4vKipcbiAqIFBhdGNoZXMgb3JpZ2luYWwgcm91dGVyIHRvIHV0aWxpemUgb3VyIHRyYWNpbmcgZnVuY3Rpb25hbGl0eVxuICovXG5mdW5jdGlvbiBwYXRjaE1pZGRsZXdhcmUocm91dGVyLCBtZXRob2QpIHtcbiAgICB2YXIgb3JpZ2luYWxDYWxsYmFjayA9IHJvdXRlclttZXRob2RdO1xuICAgIHJvdXRlclttZXRob2RdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvcmlnaW5hbENhbGxiYWNrLmNhbGwuYXBwbHkob3JpZ2luYWxDYWxsYmFjaywgX19zcHJlYWQoW3RoaXNdLCB3cmFwTWlkZGxld2FyZUFyZ3MoYXJncywgbWV0aG9kKSkpO1xuICAgIH07XG4gICAgcmV0dXJuIHJvdXRlcjtcbn1cbi8qKlxuICogUGF0Y2hlcyBvcmlnaW5hbCByb3V0ZXIgbWV0aG9kc1xuICovXG5mdW5jdGlvbiBpbnN0cnVtZW50TWlkZGxld2FyZXMocm91dGVyLCBtZXRob2RzKSB7XG4gICAgaWYgKG1ldGhvZHMgPT09IHZvaWQgMCkgeyBtZXRob2RzID0gW107IH1cbiAgICBtZXRob2RzLmZvckVhY2goZnVuY3Rpb24gKG1ldGhvZCkgeyByZXR1cm4gcGF0Y2hNaWRkbGV3YXJlKHJvdXRlciwgbWV0aG9kKTsgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1leHByZXNzLmpzLm1hcCIsImV4cG9ydCB7IEV4cHJlc3MgfSBmcm9tICcuL2V4cHJlc3MnO1xuZXhwb3J0IHsgUG9zdGdyZXMgfSBmcm9tICcuL3Bvc3RncmVzJztcbmV4cG9ydCB7IE15c3FsIH0gZnJvbSAnLi9teXNxbCc7XG5leHBvcnQgeyBNb25nbyB9IGZyb20gJy4vbW9uZ28nO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwiaW1wb3J0IHsgX19hc3NpZ24gfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IEJyb3dzZXJUcmFjaW5nIH0gZnJvbSAnLi9icm93c2VyJztcbmltcG9ydCB7IGFkZEV4dGVuc2lvbk1ldGhvZHMgfSBmcm9tICcuL2h1YmV4dGVuc2lvbnMnO1xuaW1wb3J0ICogYXMgVHJhY2luZ0ludGVncmF0aW9ucyBmcm9tICcuL2ludGVncmF0aW9ucyc7XG52YXIgSW50ZWdyYXRpb25zID0gX19hc3NpZ24oX19hc3NpZ24oe30sIFRyYWNpbmdJbnRlZ3JhdGlvbnMpLCB7IEJyb3dzZXJUcmFjaW5nOiBCcm93c2VyVHJhY2luZyB9KTtcbmV4cG9ydCB7IEludGVncmF0aW9ucyB9O1xuZXhwb3J0IHsgU3BhbiB9IGZyb20gJy4vc3Bhbic7XG5leHBvcnQgeyBUcmFuc2FjdGlvbiB9IGZyb20gJy4vdHJhbnNhY3Rpb24nO1xuZXhwb3J0IHsgXG4vLyBUT0RPIGRlcHJlY2F0ZSBvbGQgbmFtZSBpbiB2N1xuaW5zdHJ1bWVudE91dGdvaW5nUmVxdWVzdHMgYXMgcmVnaXN0ZXJSZXF1ZXN0SW5zdHJ1bWVudGF0aW9uLCBkZWZhdWx0UmVxdWVzdEluc3RydW1lbnRhdGlvbk9wdGlvbnMsIH0gZnJvbSAnLi9icm93c2VyJztcbmV4cG9ydCB7IFNwYW5TdGF0dXMgfSBmcm9tICcuL3NwYW5zdGF0dXMnO1xuZXhwb3J0IHsgSWRsZVRyYW5zYWN0aW9uIH0gZnJvbSAnLi9pZGxldHJhbnNhY3Rpb24nO1xuZXhwb3J0IHsgc3RhcnRJZGxlVHJhbnNhY3Rpb24gfSBmcm9tICcuL2h1YmV4dGVuc2lvbnMnO1xuLy8gV2UgYXJlIHBhdGNoaW5nIHRoZSBnbG9iYWwgb2JqZWN0IHdpdGggb3VyIGh1YiBleHRlbnNpb24gbWV0aG9kc1xuYWRkRXh0ZW5zaW9uTWV0aG9kcygpO1xuZXhwb3J0IHsgYWRkRXh0ZW5zaW9uTWV0aG9kcyB9O1xuZXhwb3J0IHsgZXh0cmFjdFRyYWNlcGFyZW50RGF0YSwgZ2V0QWN0aXZlVHJhbnNhY3Rpb24sIGhhc1RyYWNpbmdFbmFibGVkLCBzdHJpcFVybFF1ZXJ5QW5kRnJhZ21lbnQsIFRSQUNFUEFSRU5UX1JFR0VYUCwgfSBmcm9tICcuL3V0aWxzJztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUNoS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///101\n')},46:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return startIdleTransaction; });\n/* unused harmony export _addTracingExtensions */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return addExtensionMethods; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(0);\n/* harmony import */ var _sentry_hub__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(14);\n/* harmony import */ var _sentry_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(75);\n/* harmony import */ var _sentry_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(5);\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(100);\n/* harmony import */ var _idletransaction__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(54);\n/* harmony import */ var _transaction__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(55);\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(10);\n\n\n\n\n\n\n\n\n/** Returns all trace headers that are currently on the top scope. */\nfunction traceHeaders() {\n    var scope = this.getScope();\n    if (scope) {\n        var span = scope.getSpan();\n        if (span) {\n            return {\n                \'sentry-trace\': span.toTraceparent(),\n            };\n        }\n    }\n    return {};\n}\n/**\n * Makes a sampling decision for the given transaction and stores it on the transaction.\n *\n * Called every time a transaction is created. Only transactions which emerge with a `sampled` value of `true` will be\n * sent to Sentry.\n *\n * @param hub: The hub off of which to read config options\n * @param transaction: The transaction needing a sampling decision\n * @param samplingContext: Default and user-provided data which may be used to help make the decision\n *\n * @returns The given transaction with its `sampled` value set\n */\nfunction sample(transaction, options, samplingContext) {\n    // nothing to do if tracing is not enabled\n    if (!Object(_utils__WEBPACK_IMPORTED_MODULE_7__[/* hasTracingEnabled */ "c"])(options)) {\n        transaction.sampled = false;\n        return transaction;\n    }\n    // if the user has forced a sampling decision by passing a `sampled` value in their transaction context, go with that\n    if (transaction.sampled !== undefined) {\n        transaction.setMetadata({\n            transactionSampling: { method: _sentry_types__WEBPACK_IMPORTED_MODULE_2__[/* TransactionSamplingMethod */ "a"].Explicit },\n        });\n        return transaction;\n    }\n    // we would have bailed already if neither `tracesSampler` nor `tracesSampleRate` were defined, so one of these should\n    // work; prefer the hook if so\n    var sampleRate;\n    if (typeof options.tracesSampler === \'function\') {\n        sampleRate = options.tracesSampler(samplingContext);\n        transaction.setMetadata({\n            transactionSampling: {\n                method: _sentry_types__WEBPACK_IMPORTED_MODULE_2__[/* TransactionSamplingMethod */ "a"].Sampler,\n                // cast to number in case it\'s a boolean\n                rate: Number(sampleRate),\n            },\n        });\n    }\n    else if (samplingContext.parentSampled !== undefined) {\n        sampleRate = samplingContext.parentSampled;\n        transaction.setMetadata({\n            transactionSampling: { method: _sentry_types__WEBPACK_IMPORTED_MODULE_2__[/* TransactionSamplingMethod */ "a"].Inheritance },\n        });\n    }\n    else {\n        sampleRate = options.tracesSampleRate;\n        transaction.setMetadata({\n            transactionSampling: {\n                method: _sentry_types__WEBPACK_IMPORTED_MODULE_2__[/* TransactionSamplingMethod */ "a"].Rate,\n                // cast to number in case it\'s a boolean\n                rate: Number(sampleRate),\n            },\n        });\n    }\n    // Since this is coming from the user (or from a function provided by the user), who knows what we might get. (The\n    // only valid values are booleans or numbers between 0 and 1.)\n    if (!isValidSampleRate(sampleRate)) {\n        _sentry_utils__WEBPACK_IMPORTED_MODULE_3__[/* logger */ "a"].warn("[Tracing] Discarding transaction because of invalid sample rate.");\n        transaction.sampled = false;\n        return transaction;\n    }\n    // if the function returned 0 (or false), or if `tracesSampleRate` is 0, it\'s a sign the transaction should be dropped\n    if (!sampleRate) {\n        _sentry_utils__WEBPACK_IMPORTED_MODULE_3__[/* logger */ "a"].log("[Tracing] Discarding transaction because " + (typeof options.tracesSampler === \'function\'\n            ? \'tracesSampler returned 0 or false\'\n            : \'a negative sampling decision was inherited or tracesSampleRate is set to 0\'));\n        transaction.sampled = false;\n        return transaction;\n    }\n    // Now we roll the dice. Math.random is inclusive of 0, but not of 1, so strict < is safe here. In case sampleRate is\n    // a boolean, the < comparison will cause it to be automatically cast to 1 if it\'s true and 0 if it\'s false.\n    transaction.sampled = Math.random() < sampleRate;\n    // if we\'re not going to keep it, we\'re done\n    if (!transaction.sampled) {\n        _sentry_utils__WEBPACK_IMPORTED_MODULE_3__[/* logger */ "a"].log("[Tracing] Discarding transaction because it\'s not included in the random sample (sampling rate = " + Number(sampleRate) + ")");\n        return transaction;\n    }\n    _sentry_utils__WEBPACK_IMPORTED_MODULE_3__[/* logger */ "a"].log("[Tracing] starting " + transaction.op + " transaction - " + transaction.name);\n    return transaction;\n}\n/**\n * Checks the given sample rate to make sure it is valid type and value (a boolean, or a number between 0 and 1).\n */\nfunction isValidSampleRate(rate) {\n    // we need to check NaN explicitly because it\'s of type \'number\' and therefore wouldn\'t get caught by this typecheck\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (isNaN(rate) || !(typeof rate === \'number\' || typeof rate === \'boolean\')) {\n        _sentry_utils__WEBPACK_IMPORTED_MODULE_3__[/* logger */ "a"].warn("[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got " + JSON.stringify(rate) + " of type " + JSON.stringify(typeof rate) + ".");\n        return false;\n    }\n    // in case sampleRate is a boolean, it will get automatically cast to 1 if it\'s true and 0 if it\'s false\n    if (rate < 0 || rate > 1) {\n        _sentry_utils__WEBPACK_IMPORTED_MODULE_3__[/* logger */ "a"].warn("[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got " + rate + ".");\n        return false;\n    }\n    return true;\n}\n/**\n * Creates a new transaction and adds a sampling decision if it doesn\'t yet have one.\n *\n * The Hub.startTransaction method delegates to this method to do its work, passing the Hub instance in as `this`, as if\n * it had been called on the hub directly. Exists as a separate function so that it can be injected into the class as an\n * "extension method."\n *\n * @param this: The Hub starting the transaction\n * @param transactionContext: Data used to configure the transaction\n * @param CustomSamplingContext: Optional data to be provided to the `tracesSampler` function (if any)\n *\n * @returns The new transaction\n *\n * @see {@link Hub.startTransaction}\n */\nfunction _startTransaction(transactionContext, customSamplingContext) {\n    var _a, _b;\n    var options = ((_a = this.getClient()) === null || _a === void 0 ? void 0 : _a.getOptions()) || {};\n    var transaction = new _transaction__WEBPACK_IMPORTED_MODULE_6__[/* Transaction */ "a"](transactionContext, this);\n    transaction = sample(transaction, options, Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ "a"])({ parentSampled: transactionContext.parentSampled, transactionContext: transactionContext }, customSamplingContext));\n    if (transaction.sampled) {\n        transaction.initSpanRecorder((_b = options._experiments) === null || _b === void 0 ? void 0 : _b.maxSpans);\n    }\n    return transaction;\n}\n/**\n * Create new idle transaction.\n */\nfunction startIdleTransaction(hub, transactionContext, idleTimeout, onScope, customSamplingContext) {\n    var _a, _b;\n    var options = ((_a = hub.getClient()) === null || _a === void 0 ? void 0 : _a.getOptions()) || {};\n    var transaction = new _idletransaction__WEBPACK_IMPORTED_MODULE_5__[/* IdleTransaction */ "b"](transactionContext, hub, idleTimeout, onScope);\n    transaction = sample(transaction, options, Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ "a"])({ parentSampled: transactionContext.parentSampled, transactionContext: transactionContext }, customSamplingContext));\n    if (transaction.sampled) {\n        transaction.initSpanRecorder((_b = options._experiments) === null || _b === void 0 ? void 0 : _b.maxSpans);\n    }\n    return transaction;\n}\n/**\n * @private\n */\nfunction _addTracingExtensions() {\n    var carrier = Object(_sentry_hub__WEBPACK_IMPORTED_MODULE_1__[/* getMainCarrier */ "c"])();\n    if (carrier.__SENTRY__) {\n        carrier.__SENTRY__.extensions = carrier.__SENTRY__.extensions || {};\n        if (!carrier.__SENTRY__.extensions.startTransaction) {\n            carrier.__SENTRY__.extensions.startTransaction = _startTransaction;\n        }\n        if (!carrier.__SENTRY__.extensions.traceHeaders) {\n            carrier.__SENTRY__.extensions.traceHeaders = traceHeaders;\n        }\n    }\n}\n/**\n * This patches the global object and injects the Tracing extensions methods\n */\nfunction addExtensionMethods() {\n    _addTracingExtensions();\n    // If an error happens globally, we should make sure transaction status is set to error.\n    Object(_errors__WEBPACK_IMPORTED_MODULE_4__[/* registerErrorInstrumentation */ "a"])();\n}\n//# sourceMappingURL=hubextensions.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHNlbnRyeS90cmFjaW5nL2VzbS9odWJleHRlbnNpb25zLmpzPzBhOWIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hc3NpZ24gfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGdldE1haW5DYXJyaWVyIH0gZnJvbSAnQHNlbnRyeS9odWInO1xuaW1wb3J0IHsgVHJhbnNhY3Rpb25TYW1wbGluZ01ldGhvZCwgfSBmcm9tICdAc2VudHJ5L3R5cGVzJztcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJ0BzZW50cnkvdXRpbHMnO1xuaW1wb3J0IHsgcmVnaXN0ZXJFcnJvckluc3RydW1lbnRhdGlvbiB9IGZyb20gJy4vZXJyb3JzJztcbmltcG9ydCB7IElkbGVUcmFuc2FjdGlvbiB9IGZyb20gJy4vaWRsZXRyYW5zYWN0aW9uJztcbmltcG9ydCB7IFRyYW5zYWN0aW9uIH0gZnJvbSAnLi90cmFuc2FjdGlvbic7XG5pbXBvcnQgeyBoYXNUcmFjaW5nRW5hYmxlZCB9IGZyb20gJy4vdXRpbHMnO1xuLyoqIFJldHVybnMgYWxsIHRyYWNlIGhlYWRlcnMgdGhhdCBhcmUgY3VycmVudGx5IG9uIHRoZSB0b3Agc2NvcGUuICovXG5mdW5jdGlvbiB0cmFjZUhlYWRlcnMoKSB7XG4gICAgdmFyIHNjb3BlID0gdGhpcy5nZXRTY29wZSgpO1xuICAgIGlmIChzY29wZSkge1xuICAgICAgICB2YXIgc3BhbiA9IHNjb3BlLmdldFNwYW4oKTtcbiAgICAgICAgaWYgKHNwYW4pIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgJ3NlbnRyeS10cmFjZSc6IHNwYW4udG9UcmFjZXBhcmVudCgpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge307XG59XG4vKipcbiAqIE1ha2VzIGEgc2FtcGxpbmcgZGVjaXNpb24gZm9yIHRoZSBnaXZlbiB0cmFuc2FjdGlvbiBhbmQgc3RvcmVzIGl0IG9uIHRoZSB0cmFuc2FjdGlvbi5cbiAqXG4gKiBDYWxsZWQgZXZlcnkgdGltZSBhIHRyYW5zYWN0aW9uIGlzIGNyZWF0ZWQuIE9ubHkgdHJhbnNhY3Rpb25zIHdoaWNoIGVtZXJnZSB3aXRoIGEgYHNhbXBsZWRgIHZhbHVlIG9mIGB0cnVlYCB3aWxsIGJlXG4gKiBzZW50IHRvIFNlbnRyeS5cbiAqXG4gKiBAcGFyYW0gaHViOiBUaGUgaHViIG9mZiBvZiB3aGljaCB0byByZWFkIGNvbmZpZyBvcHRpb25zXG4gKiBAcGFyYW0gdHJhbnNhY3Rpb246IFRoZSB0cmFuc2FjdGlvbiBuZWVkaW5nIGEgc2FtcGxpbmcgZGVjaXNpb25cbiAqIEBwYXJhbSBzYW1wbGluZ0NvbnRleHQ6IERlZmF1bHQgYW5kIHVzZXItcHJvdmlkZWQgZGF0YSB3aGljaCBtYXkgYmUgdXNlZCB0byBoZWxwIG1ha2UgdGhlIGRlY2lzaW9uXG4gKlxuICogQHJldHVybnMgVGhlIGdpdmVuIHRyYW5zYWN0aW9uIHdpdGggaXRzIGBzYW1wbGVkYCB2YWx1ZSBzZXRcbiAqL1xuZnVuY3Rpb24gc2FtcGxlKHRyYW5zYWN0aW9uLCBvcHRpb25zLCBzYW1wbGluZ0NvbnRleHQpIHtcbiAgICAvLyBub3RoaW5nIHRvIGRvIGlmIHRyYWNpbmcgaXMgbm90IGVuYWJsZWRcbiAgICBpZiAoIWhhc1RyYWNpbmdFbmFibGVkKG9wdGlvbnMpKSB7XG4gICAgICAgIHRyYW5zYWN0aW9uLnNhbXBsZWQgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRyYW5zYWN0aW9uO1xuICAgIH1cbiAgICAvLyBpZiB0aGUgdXNlciBoYXMgZm9yY2VkIGEgc2FtcGxpbmcgZGVjaXNpb24gYnkgcGFzc2luZyBhIGBzYW1wbGVkYCB2YWx1ZSBpbiB0aGVpciB0cmFuc2FjdGlvbiBjb250ZXh0LCBnbyB3aXRoIHRoYXRcbiAgICBpZiAodHJhbnNhY3Rpb24uc2FtcGxlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRyYW5zYWN0aW9uLnNldE1ldGFkYXRhKHtcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uU2FtcGxpbmc6IHsgbWV0aG9kOiBUcmFuc2FjdGlvblNhbXBsaW5nTWV0aG9kLkV4cGxpY2l0IH0sXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdHJhbnNhY3Rpb247XG4gICAgfVxuICAgIC8vIHdlIHdvdWxkIGhhdmUgYmFpbGVkIGFscmVhZHkgaWYgbmVpdGhlciBgdHJhY2VzU2FtcGxlcmAgbm9yIGB0cmFjZXNTYW1wbGVSYXRlYCB3ZXJlIGRlZmluZWQsIHNvIG9uZSBvZiB0aGVzZSBzaG91bGRcbiAgICAvLyB3b3JrOyBwcmVmZXIgdGhlIGhvb2sgaWYgc29cbiAgICB2YXIgc2FtcGxlUmF0ZTtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMudHJhY2VzU2FtcGxlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBzYW1wbGVSYXRlID0gb3B0aW9ucy50cmFjZXNTYW1wbGVyKHNhbXBsaW5nQ29udGV4dCk7XG4gICAgICAgIHRyYW5zYWN0aW9uLnNldE1ldGFkYXRhKHtcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uU2FtcGxpbmc6IHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFRyYW5zYWN0aW9uU2FtcGxpbmdNZXRob2QuU2FtcGxlcixcbiAgICAgICAgICAgICAgICAvLyBjYXN0IHRvIG51bWJlciBpbiBjYXNlIGl0J3MgYSBib29sZWFuXG4gICAgICAgICAgICAgICAgcmF0ZTogTnVtYmVyKHNhbXBsZVJhdGUpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHNhbXBsaW5nQ29udGV4dC5wYXJlbnRTYW1wbGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgc2FtcGxlUmF0ZSA9IHNhbXBsaW5nQ29udGV4dC5wYXJlbnRTYW1wbGVkO1xuICAgICAgICB0cmFuc2FjdGlvbi5zZXRNZXRhZGF0YSh7XG4gICAgICAgICAgICB0cmFuc2FjdGlvblNhbXBsaW5nOiB7IG1ldGhvZDogVHJhbnNhY3Rpb25TYW1wbGluZ01ldGhvZC5Jbmhlcml0YW5jZSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHNhbXBsZVJhdGUgPSBvcHRpb25zLnRyYWNlc1NhbXBsZVJhdGU7XG4gICAgICAgIHRyYW5zYWN0aW9uLnNldE1ldGFkYXRhKHtcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uU2FtcGxpbmc6IHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFRyYW5zYWN0aW9uU2FtcGxpbmdNZXRob2QuUmF0ZSxcbiAgICAgICAgICAgICAgICAvLyBjYXN0IHRvIG51bWJlciBpbiBjYXNlIGl0J3MgYSBib29sZWFuXG4gICAgICAgICAgICAgICAgcmF0ZTogTnVtYmVyKHNhbXBsZVJhdGUpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIFNpbmNlIHRoaXMgaXMgY29taW5nIGZyb20gdGhlIHVzZXIgKG9yIGZyb20gYSBmdW5jdGlvbiBwcm92aWRlZCBieSB0aGUgdXNlciksIHdobyBrbm93cyB3aGF0IHdlIG1pZ2h0IGdldC4gKFRoZVxuICAgIC8vIG9ubHkgdmFsaWQgdmFsdWVzIGFyZSBib29sZWFucyBvciBudW1iZXJzIGJldHdlZW4gMCBhbmQgMS4pXG4gICAgaWYgKCFpc1ZhbGlkU2FtcGxlUmF0ZShzYW1wbGVSYXRlKSkge1xuICAgICAgICBsb2dnZXIud2FybihcIltUcmFjaW5nXSBEaXNjYXJkaW5nIHRyYW5zYWN0aW9uIGJlY2F1c2Ugb2YgaW52YWxpZCBzYW1wbGUgcmF0ZS5cIik7XG4gICAgICAgIHRyYW5zYWN0aW9uLnNhbXBsZWQgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRyYW5zYWN0aW9uO1xuICAgIH1cbiAgICAvLyBpZiB0aGUgZnVuY3Rpb24gcmV0dXJuZWQgMCAob3IgZmFsc2UpLCBvciBpZiBgdHJhY2VzU2FtcGxlUmF0ZWAgaXMgMCwgaXQncyBhIHNpZ24gdGhlIHRyYW5zYWN0aW9uIHNob3VsZCBiZSBkcm9wcGVkXG4gICAgaWYgKCFzYW1wbGVSYXRlKSB7XG4gICAgICAgIGxvZ2dlci5sb2coXCJbVHJhY2luZ10gRGlzY2FyZGluZyB0cmFuc2FjdGlvbiBiZWNhdXNlIFwiICsgKHR5cGVvZiBvcHRpb25zLnRyYWNlc1NhbXBsZXIgPT09ICdmdW5jdGlvbidcbiAgICAgICAgICAgID8gJ3RyYWNlc1NhbXBsZXIgcmV0dXJuZWQgMCBvciBmYWxzZSdcbiAgICAgICAgICAgIDogJ2EgbmVnYXRpdmUgc2FtcGxpbmcgZGVjaXNpb24gd2FzIGluaGVyaXRlZCBvciB0cmFjZXNTYW1wbGVSYXRlIGlzIHNldCB0byAwJykpO1xuICAgICAgICB0cmFuc2FjdGlvbi5zYW1wbGVkID0gZmFsc2U7XG4gICAgICAgIHJldHVybiB0cmFuc2FjdGlvbjtcbiAgICB9XG4gICAgLy8gTm93IHdlIHJvbGwgdGhlIGRpY2UuIE1hdGgucmFuZG9tIGlzIGluY2x1c2l2ZSBvZiAwLCBidXQgbm90IG9mIDEsIHNvIHN0cmljdCA8IGlzIHNhZmUgaGVyZS4gSW4gY2FzZSBzYW1wbGVSYXRlIGlzXG4gICAgLy8gYSBib29sZWFuLCB0aGUgPCBjb21wYXJpc29uIHdpbGwgY2F1c2UgaXQgdG8gYmUgYXV0b21hdGljYWxseSBjYXN0IHRvIDEgaWYgaXQncyB0cnVlIGFuZCAwIGlmIGl0J3MgZmFsc2UuXG4gICAgdHJhbnNhY3Rpb24uc2FtcGxlZCA9IE1hdGgucmFuZG9tKCkgPCBzYW1wbGVSYXRlO1xuICAgIC8vIGlmIHdlJ3JlIG5vdCBnb2luZyB0byBrZWVwIGl0LCB3ZSdyZSBkb25lXG4gICAgaWYgKCF0cmFuc2FjdGlvbi5zYW1wbGVkKSB7XG4gICAgICAgIGxvZ2dlci5sb2coXCJbVHJhY2luZ10gRGlzY2FyZGluZyB0cmFuc2FjdGlvbiBiZWNhdXNlIGl0J3Mgbm90IGluY2x1ZGVkIGluIHRoZSByYW5kb20gc2FtcGxlIChzYW1wbGluZyByYXRlID0gXCIgKyBOdW1iZXIoc2FtcGxlUmF0ZSkgKyBcIilcIik7XG4gICAgICAgIHJldHVybiB0cmFuc2FjdGlvbjtcbiAgICB9XG4gICAgbG9nZ2VyLmxvZyhcIltUcmFjaW5nXSBzdGFydGluZyBcIiArIHRyYW5zYWN0aW9uLm9wICsgXCIgdHJhbnNhY3Rpb24gLSBcIiArIHRyYW5zYWN0aW9uLm5hbWUpO1xuICAgIHJldHVybiB0cmFuc2FjdGlvbjtcbn1cbi8qKlxuICogQ2hlY2tzIHRoZSBnaXZlbiBzYW1wbGUgcmF0ZSB0byBtYWtlIHN1cmUgaXQgaXMgdmFsaWQgdHlwZSBhbmQgdmFsdWUgKGEgYm9vbGVhbiwgb3IgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxKS5cbiAqL1xuZnVuY3Rpb24gaXNWYWxpZFNhbXBsZVJhdGUocmF0ZSkge1xuICAgIC8vIHdlIG5lZWQgdG8gY2hlY2sgTmFOIGV4cGxpY2l0bHkgYmVjYXVzZSBpdCdzIG9mIHR5cGUgJ251bWJlcicgYW5kIHRoZXJlZm9yZSB3b3VsZG4ndCBnZXQgY2F1Z2h0IGJ5IHRoaXMgdHlwZWNoZWNrXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBpZiAoaXNOYU4ocmF0ZSkgfHwgISh0eXBlb2YgcmF0ZSA9PT0gJ251bWJlcicgfHwgdHlwZW9mIHJhdGUgPT09ICdib29sZWFuJykpIHtcbiAgICAgICAgbG9nZ2VyLndhcm4oXCJbVHJhY2luZ10gR2l2ZW4gc2FtcGxlIHJhdGUgaXMgaW52YWxpZC4gU2FtcGxlIHJhdGUgbXVzdCBiZSBhIGJvb2xlYW4gb3IgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxLiBHb3QgXCIgKyBKU09OLnN0cmluZ2lmeShyYXRlKSArIFwiIG9mIHR5cGUgXCIgKyBKU09OLnN0cmluZ2lmeSh0eXBlb2YgcmF0ZSkgKyBcIi5cIik7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gaW4gY2FzZSBzYW1wbGVSYXRlIGlzIGEgYm9vbGVhbiwgaXQgd2lsbCBnZXQgYXV0b21hdGljYWxseSBjYXN0IHRvIDEgaWYgaXQncyB0cnVlIGFuZCAwIGlmIGl0J3MgZmFsc2VcbiAgICBpZiAocmF0ZSA8IDAgfHwgcmF0ZSA+IDEpIHtcbiAgICAgICAgbG9nZ2VyLndhcm4oXCJbVHJhY2luZ10gR2l2ZW4gc2FtcGxlIHJhdGUgaXMgaW52YWxpZC4gU2FtcGxlIHJhdGUgbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDEuIEdvdCBcIiArIHJhdGUgKyBcIi5cIik7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgdHJhbnNhY3Rpb24gYW5kIGFkZHMgYSBzYW1wbGluZyBkZWNpc2lvbiBpZiBpdCBkb2Vzbid0IHlldCBoYXZlIG9uZS5cbiAqXG4gKiBUaGUgSHViLnN0YXJ0VHJhbnNhY3Rpb24gbWV0aG9kIGRlbGVnYXRlcyB0byB0aGlzIG1ldGhvZCB0byBkbyBpdHMgd29yaywgcGFzc2luZyB0aGUgSHViIGluc3RhbmNlIGluIGFzIGB0aGlzYCwgYXMgaWZcbiAqIGl0IGhhZCBiZWVuIGNhbGxlZCBvbiB0aGUgaHViIGRpcmVjdGx5LiBFeGlzdHMgYXMgYSBzZXBhcmF0ZSBmdW5jdGlvbiBzbyB0aGF0IGl0IGNhbiBiZSBpbmplY3RlZCBpbnRvIHRoZSBjbGFzcyBhcyBhblxuICogXCJleHRlbnNpb24gbWV0aG9kLlwiXG4gKlxuICogQHBhcmFtIHRoaXM6IFRoZSBIdWIgc3RhcnRpbmcgdGhlIHRyYW5zYWN0aW9uXG4gKiBAcGFyYW0gdHJhbnNhY3Rpb25Db250ZXh0OiBEYXRhIHVzZWQgdG8gY29uZmlndXJlIHRoZSB0cmFuc2FjdGlvblxuICogQHBhcmFtIEN1c3RvbVNhbXBsaW5nQ29udGV4dDogT3B0aW9uYWwgZGF0YSB0byBiZSBwcm92aWRlZCB0byB0aGUgYHRyYWNlc1NhbXBsZXJgIGZ1bmN0aW9uIChpZiBhbnkpXG4gKlxuICogQHJldHVybnMgVGhlIG5ldyB0cmFuc2FjdGlvblxuICpcbiAqIEBzZWUge0BsaW5rIEh1Yi5zdGFydFRyYW5zYWN0aW9ufVxuICovXG5mdW5jdGlvbiBfc3RhcnRUcmFuc2FjdGlvbih0cmFuc2FjdGlvbkNvbnRleHQsIGN1c3RvbVNhbXBsaW5nQ29udGV4dCkge1xuICAgIHZhciBfYSwgX2I7XG4gICAgdmFyIG9wdGlvbnMgPSAoKF9hID0gdGhpcy5nZXRDbGllbnQoKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmdldE9wdGlvbnMoKSkgfHwge307XG4gICAgdmFyIHRyYW5zYWN0aW9uID0gbmV3IFRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uQ29udGV4dCwgdGhpcyk7XG4gICAgdHJhbnNhY3Rpb24gPSBzYW1wbGUodHJhbnNhY3Rpb24sIG9wdGlvbnMsIF9fYXNzaWduKHsgcGFyZW50U2FtcGxlZDogdHJhbnNhY3Rpb25Db250ZXh0LnBhcmVudFNhbXBsZWQsIHRyYW5zYWN0aW9uQ29udGV4dDogdHJhbnNhY3Rpb25Db250ZXh0IH0sIGN1c3RvbVNhbXBsaW5nQ29udGV4dCkpO1xuICAgIGlmICh0cmFuc2FjdGlvbi5zYW1wbGVkKSB7XG4gICAgICAgIHRyYW5zYWN0aW9uLmluaXRTcGFuUmVjb3JkZXIoKF9iID0gb3B0aW9ucy5fZXhwZXJpbWVudHMpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5tYXhTcGFucyk7XG4gICAgfVxuICAgIHJldHVybiB0cmFuc2FjdGlvbjtcbn1cbi8qKlxuICogQ3JlYXRlIG5ldyBpZGxlIHRyYW5zYWN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RhcnRJZGxlVHJhbnNhY3Rpb24oaHViLCB0cmFuc2FjdGlvbkNvbnRleHQsIGlkbGVUaW1lb3V0LCBvblNjb3BlLCBjdXN0b21TYW1wbGluZ0NvbnRleHQpIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIHZhciBvcHRpb25zID0gKChfYSA9IGh1Yi5nZXRDbGllbnQoKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmdldE9wdGlvbnMoKSkgfHwge307XG4gICAgdmFyIHRyYW5zYWN0aW9uID0gbmV3IElkbGVUcmFuc2FjdGlvbih0cmFuc2FjdGlvbkNvbnRleHQsIGh1YiwgaWRsZVRpbWVvdXQsIG9uU2NvcGUpO1xuICAgIHRyYW5zYWN0aW9uID0gc2FtcGxlKHRyYW5zYWN0aW9uLCBvcHRpb25zLCBfX2Fzc2lnbih7IHBhcmVudFNhbXBsZWQ6IHRyYW5zYWN0aW9uQ29udGV4dC5wYXJlbnRTYW1wbGVkLCB0cmFuc2FjdGlvbkNvbnRleHQ6IHRyYW5zYWN0aW9uQ29udGV4dCB9LCBjdXN0b21TYW1wbGluZ0NvbnRleHQpKTtcbiAgICBpZiAodHJhbnNhY3Rpb24uc2FtcGxlZCkge1xuICAgICAgICB0cmFuc2FjdGlvbi5pbml0U3BhblJlY29yZGVyKChfYiA9IG9wdGlvbnMuX2V4cGVyaW1lbnRzKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IubWF4U3BhbnMpO1xuICAgIH1cbiAgICByZXR1cm4gdHJhbnNhY3Rpb247XG59XG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBfYWRkVHJhY2luZ0V4dGVuc2lvbnMoKSB7XG4gICAgdmFyIGNhcnJpZXIgPSBnZXRNYWluQ2FycmllcigpO1xuICAgIGlmIChjYXJyaWVyLl9fU0VOVFJZX18pIHtcbiAgICAgICAgY2Fycmllci5fX1NFTlRSWV9fLmV4dGVuc2lvbnMgPSBjYXJyaWVyLl9fU0VOVFJZX18uZXh0ZW5zaW9ucyB8fCB7fTtcbiAgICAgICAgaWYgKCFjYXJyaWVyLl9fU0VOVFJZX18uZXh0ZW5zaW9ucy5zdGFydFRyYW5zYWN0aW9uKSB7XG4gICAgICAgICAgICBjYXJyaWVyLl9fU0VOVFJZX18uZXh0ZW5zaW9ucy5zdGFydFRyYW5zYWN0aW9uID0gX3N0YXJ0VHJhbnNhY3Rpb247XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFjYXJyaWVyLl9fU0VOVFJZX18uZXh0ZW5zaW9ucy50cmFjZUhlYWRlcnMpIHtcbiAgICAgICAgICAgIGNhcnJpZXIuX19TRU5UUllfXy5leHRlbnNpb25zLnRyYWNlSGVhZGVycyA9IHRyYWNlSGVhZGVycztcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogVGhpcyBwYXRjaGVzIHRoZSBnbG9iYWwgb2JqZWN0IGFuZCBpbmplY3RzIHRoZSBUcmFjaW5nIGV4dGVuc2lvbnMgbWV0aG9kc1xuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkRXh0ZW5zaW9uTWV0aG9kcygpIHtcbiAgICBfYWRkVHJhY2luZ0V4dGVuc2lvbnMoKTtcbiAgICAvLyBJZiBhbiBlcnJvciBoYXBwZW5zIGdsb2JhbGx5LCB3ZSBzaG91bGQgbWFrZSBzdXJlIHRyYW5zYWN0aW9uIHN0YXR1cyBpcyBzZXQgdG8gZXJyb3IuXG4gICAgcmVnaXN0ZXJFcnJvckluc3RydW1lbnRhdGlvbigpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aHViZXh0ZW5zaW9ucy5qcy5tYXAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///46\n')},54:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DEFAULT_IDLE_TIMEOUT; });\n/* unused harmony export IdleTransactionSpanRecorder */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return IdleTransaction; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(0);\n/* harmony import */ var _sentry_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(60);\n/* harmony import */ var _sentry_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(5);\n/* harmony import */ var _span__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(47);\n/* harmony import */ var _spanstatus__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(20);\n/* harmony import */ var _transaction__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(55);\n\n\n\n\n\nvar DEFAULT_IDLE_TIMEOUT = 1000;\n/**\n * @inheritDoc\n */\nvar IdleTransactionSpanRecorder = /** @class */ (function (_super) {\n    Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __extends */ "c"])(IdleTransactionSpanRecorder, _super);\n    function IdleTransactionSpanRecorder(_pushActivity, _popActivity, transactionSpanId, maxlen) {\n        if (transactionSpanId === void 0) { transactionSpanId = \'\'; }\n        var _this = _super.call(this, maxlen) || this;\n        _this._pushActivity = _pushActivity;\n        _this._popActivity = _popActivity;\n        _this.transactionSpanId = transactionSpanId;\n        return _this;\n    }\n    /**\n     * @inheritDoc\n     */\n    IdleTransactionSpanRecorder.prototype.add = function (span) {\n        var _this = this;\n        // We should make sure we do not push and pop activities for\n        // the transaction that this span recorder belongs to.\n        if (span.spanId !== this.transactionSpanId) {\n            // We patch span.finish() to pop an activity after setting an endTimestamp.\n            span.finish = function (endTimestamp) {\n                span.endTimestamp = typeof endTimestamp === \'number\' ? endTimestamp : Object(_sentry_utils__WEBPACK_IMPORTED_MODULE_1__[/* timestampWithMs */ "c"])();\n                _this._popActivity(span.spanId);\n            };\n            // We should only push new activities if the span does not have an end timestamp.\n            if (span.endTimestamp === undefined) {\n                this._pushActivity(span.spanId);\n            }\n        }\n        _super.prototype.add.call(this, span);\n    };\n    return IdleTransactionSpanRecorder;\n}(_span__WEBPACK_IMPORTED_MODULE_3__[/* SpanRecorder */ "b"]));\n\n/**\n * An IdleTransaction is a transaction that automatically finishes. It does this by tracking child spans as activities.\n * You can have multiple IdleTransactions active, but if the `onScope` option is specified, the idle transaction will\n * put itself on the scope on creation.\n */\nvar IdleTransaction = /** @class */ (function (_super) {\n    Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __extends */ "c"])(IdleTransaction, _super);\n    function IdleTransaction(transactionContext, _idleHub, \n    // The time to wait in ms until the idle transaction will be finished. Default: 1000\n    _idleTimeout, \n    // If an idle transaction should be put itself on and off the scope automatically.\n    _onScope) {\n        if (_idleTimeout === void 0) { _idleTimeout = DEFAULT_IDLE_TIMEOUT; }\n        if (_onScope === void 0) { _onScope = false; }\n        var _this = _super.call(this, transactionContext, _idleHub) || this;\n        _this._idleHub = _idleHub;\n        _this._idleTimeout = _idleTimeout;\n        _this._onScope = _onScope;\n        // Activities store a list of active spans\n        _this.activities = {};\n        // Stores reference to the timeout that calls _beat().\n        _this._heartbeatTimer = 0;\n        // Amount of times heartbeat has counted. Will cause transaction to finish after 3 beats.\n        _this._heartbeatCounter = 0;\n        // We should not use heartbeat if we finished a transaction\n        _this._finished = false;\n        _this._beforeFinishCallbacks = [];\n        if (_idleHub && _onScope) {\n            // There should only be one active transaction on the scope\n            clearActiveTransaction(_idleHub);\n            // We set the transaction here on the scope so error events pick up the trace\n            // context and attach it to the error.\n            _sentry_utils__WEBPACK_IMPORTED_MODULE_2__[/* logger */ "a"].log("Setting idle transaction on scope. Span ID: " + _this.spanId);\n            _idleHub.configureScope(function (scope) { return scope.setSpan(_this); });\n        }\n        _this._initTimeout = setTimeout(function () {\n            if (!_this._finished) {\n                _this.finish();\n            }\n        }, _this._idleTimeout);\n        return _this;\n    }\n    /** {@inheritDoc} */\n    IdleTransaction.prototype.finish = function (endTimestamp) {\n        var e_1, _a;\n        var _this = this;\n        if (endTimestamp === void 0) { endTimestamp = Object(_sentry_utils__WEBPACK_IMPORTED_MODULE_1__[/* timestampWithMs */ "c"])(); }\n        this._finished = true;\n        this.activities = {};\n        if (this.spanRecorder) {\n            _sentry_utils__WEBPACK_IMPORTED_MODULE_2__[/* logger */ "a"].log(\'[Tracing] finishing IdleTransaction\', new Date(endTimestamp * 1000).toISOString(), this.op);\n            try {\n                for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __values */ "i"])(this._beforeFinishCallbacks), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var callback = _c.value;\n                    callback(this, endTimestamp);\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            this.spanRecorder.spans = this.spanRecorder.spans.filter(function (span) {\n                // If we are dealing with the transaction itself, we just return it\n                if (span.spanId === _this.spanId) {\n                    return true;\n                }\n                // We cancel all pending spans with status "cancelled" to indicate the idle transaction was finished early\n                if (!span.endTimestamp) {\n                    span.endTimestamp = endTimestamp;\n                    span.setStatus(_spanstatus__WEBPACK_IMPORTED_MODULE_4__[/* SpanStatus */ "a"].Cancelled);\n                    _sentry_utils__WEBPACK_IMPORTED_MODULE_2__[/* logger */ "a"].log(\'[Tracing] cancelling span since transaction ended early\', JSON.stringify(span, undefined, 2));\n                }\n                var keepSpan = span.startTimestamp < endTimestamp;\n                if (!keepSpan) {\n                    _sentry_utils__WEBPACK_IMPORTED_MODULE_2__[/* logger */ "a"].log(\'[Tracing] discarding Span since it happened after Transaction was finished\', JSON.stringify(span, undefined, 2));\n                }\n                return keepSpan;\n            });\n            _sentry_utils__WEBPACK_IMPORTED_MODULE_2__[/* logger */ "a"].log(\'[Tracing] flushing IdleTransaction\');\n        }\n        else {\n            _sentry_utils__WEBPACK_IMPORTED_MODULE_2__[/* logger */ "a"].log(\'[Tracing] No active IdleTransaction\');\n        }\n        // this._onScope is true if the transaction was previously on the scope.\n        if (this._onScope) {\n            clearActiveTransaction(this._idleHub);\n        }\n        return _super.prototype.finish.call(this, endTimestamp);\n    };\n    /**\n     * Register a callback function that gets excecuted before the transaction finishes.\n     * Useful for cleanup or if you want to add any additional spans based on current context.\n     *\n     * This is exposed because users have no other way of running something before an idle transaction\n     * finishes.\n     */\n    IdleTransaction.prototype.registerBeforeFinishCallback = function (callback) {\n        this._beforeFinishCallbacks.push(callback);\n    };\n    /**\n     * @inheritDoc\n     */\n    IdleTransaction.prototype.initSpanRecorder = function (maxlen) {\n        var _this = this;\n        if (!this.spanRecorder) {\n            var pushActivity = function (id) {\n                if (_this._finished) {\n                    return;\n                }\n                _this._pushActivity(id);\n            };\n            var popActivity = function (id) {\n                if (_this._finished) {\n                    return;\n                }\n                _this._popActivity(id);\n            };\n            this.spanRecorder = new IdleTransactionSpanRecorder(pushActivity, popActivity, this.spanId, maxlen);\n            // Start heartbeat so that transactions do not run forever.\n            _sentry_utils__WEBPACK_IMPORTED_MODULE_2__[/* logger */ "a"].log(\'Starting heartbeat\');\n            this._pingHeartbeat();\n        }\n        this.spanRecorder.add(this);\n    };\n    /**\n     * Start tracking a specific activity.\n     * @param spanId The span id that represents the activity\n     */\n    IdleTransaction.prototype._pushActivity = function (spanId) {\n        if (this._initTimeout) {\n            clearTimeout(this._initTimeout);\n            this._initTimeout = undefined;\n        }\n        _sentry_utils__WEBPACK_IMPORTED_MODULE_2__[/* logger */ "a"].log("[Tracing] pushActivity: " + spanId);\n        this.activities[spanId] = true;\n        _sentry_utils__WEBPACK_IMPORTED_MODULE_2__[/* logger */ "a"].log(\'[Tracing] new activities count\', Object.keys(this.activities).length);\n    };\n    /**\n     * Remove an activity from usage\n     * @param spanId The span id that represents the activity\n     */\n    IdleTransaction.prototype._popActivity = function (spanId) {\n        var _this = this;\n        if (this.activities[spanId]) {\n            _sentry_utils__WEBPACK_IMPORTED_MODULE_2__[/* logger */ "a"].log("[Tracing] popActivity " + spanId);\n            // eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n            delete this.activities[spanId];\n            _sentry_utils__WEBPACK_IMPORTED_MODULE_2__[/* logger */ "a"].log(\'[Tracing] new activities count\', Object.keys(this.activities).length);\n        }\n        if (Object.keys(this.activities).length === 0) {\n            var timeout = this._idleTimeout;\n            // We need to add the timeout here to have the real endtimestamp of the transaction\n            // Remember timestampWithMs is in seconds, timeout is in ms\n            var end_1 = Object(_sentry_utils__WEBPACK_IMPORTED_MODULE_1__[/* timestampWithMs */ "c"])() + timeout / 1000;\n            setTimeout(function () {\n                if (!_this._finished) {\n                    _this.finish(end_1);\n                }\n            }, timeout);\n        }\n    };\n    /**\n     * Checks when entries of this.activities are not changing for 3 beats.\n     * If this occurs we finish the transaction.\n     */\n    IdleTransaction.prototype._beat = function () {\n        clearTimeout(this._heartbeatTimer);\n        // We should not be running heartbeat if the idle transaction is finished.\n        if (this._finished) {\n            return;\n        }\n        var keys = Object.keys(this.activities);\n        var heartbeatString = keys.length ? keys.reduce(function (prev, current) { return prev + current; }) : \'\';\n        if (heartbeatString === this._prevHeartbeatString) {\n            this._heartbeatCounter += 1;\n        }\n        else {\n            this._heartbeatCounter = 1;\n        }\n        this._prevHeartbeatString = heartbeatString;\n        if (this._heartbeatCounter >= 3) {\n            _sentry_utils__WEBPACK_IMPORTED_MODULE_2__[/* logger */ "a"].log("[Tracing] Transaction finished because of no change for 3 heart beats");\n            this.setStatus(_spanstatus__WEBPACK_IMPORTED_MODULE_4__[/* SpanStatus */ "a"].DeadlineExceeded);\n            this.setTag(\'heartbeat\', \'failed\');\n            this.finish();\n        }\n        else {\n            this._pingHeartbeat();\n        }\n    };\n    /**\n     * Pings the heartbeat\n     */\n    IdleTransaction.prototype._pingHeartbeat = function () {\n        var _this = this;\n        _sentry_utils__WEBPACK_IMPORTED_MODULE_2__[/* logger */ "a"].log("pinging Heartbeat -> current counter: " + this._heartbeatCounter);\n        this._heartbeatTimer = setTimeout(function () {\n            _this._beat();\n        }, 5000);\n    };\n    return IdleTransaction;\n}(_transaction__WEBPACK_IMPORTED_MODULE_5__[/* Transaction */ "a"]));\n\n/**\n * Reset active transaction on scope\n */\nfunction clearActiveTransaction(hub) {\n    if (hub) {\n        var scope = hub.getScope();\n        if (scope) {\n            var transaction = scope.getTransaction();\n            if (transaction) {\n                scope.setSpan(undefined);\n            }\n        }\n    }\n}\n//# sourceMappingURL=idletransaction.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHNlbnRyeS90cmFjaW5nL2VzbS9pZGxldHJhbnNhY3Rpb24uanM/MzAxNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2V4dGVuZHMsIF9fdmFsdWVzIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBsb2dnZXIsIHRpbWVzdGFtcFdpdGhNcyB9IGZyb20gJ0BzZW50cnkvdXRpbHMnO1xuaW1wb3J0IHsgU3BhblJlY29yZGVyIH0gZnJvbSAnLi9zcGFuJztcbmltcG9ydCB7IFNwYW5TdGF0dXMgfSBmcm9tICcuL3NwYW5zdGF0dXMnO1xuaW1wb3J0IHsgVHJhbnNhY3Rpb24gfSBmcm9tICcuL3RyYW5zYWN0aW9uJztcbmV4cG9ydCB2YXIgREVGQVVMVF9JRExFX1RJTUVPVVQgPSAxMDAwO1xuLyoqXG4gKiBAaW5oZXJpdERvY1xuICovXG52YXIgSWRsZVRyYW5zYWN0aW9uU3BhblJlY29yZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhJZGxlVHJhbnNhY3Rpb25TcGFuUmVjb3JkZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gSWRsZVRyYW5zYWN0aW9uU3BhblJlY29yZGVyKF9wdXNoQWN0aXZpdHksIF9wb3BBY3Rpdml0eSwgdHJhbnNhY3Rpb25TcGFuSWQsIG1heGxlbikge1xuICAgICAgICBpZiAodHJhbnNhY3Rpb25TcGFuSWQgPT09IHZvaWQgMCkgeyB0cmFuc2FjdGlvblNwYW5JZCA9ICcnOyB9XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1heGxlbikgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuX3B1c2hBY3Rpdml0eSA9IF9wdXNoQWN0aXZpdHk7XG4gICAgICAgIF90aGlzLl9wb3BBY3Rpdml0eSA9IF9wb3BBY3Rpdml0eTtcbiAgICAgICAgX3RoaXMudHJhbnNhY3Rpb25TcGFuSWQgPSB0cmFuc2FjdGlvblNwYW5JZDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW5oZXJpdERvY1xuICAgICAqL1xuICAgIElkbGVUcmFuc2FjdGlvblNwYW5SZWNvcmRlci5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKHNwYW4pIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgLy8gV2Ugc2hvdWxkIG1ha2Ugc3VyZSB3ZSBkbyBub3QgcHVzaCBhbmQgcG9wIGFjdGl2aXRpZXMgZm9yXG4gICAgICAgIC8vIHRoZSB0cmFuc2FjdGlvbiB0aGF0IHRoaXMgc3BhbiByZWNvcmRlciBiZWxvbmdzIHRvLlxuICAgICAgICBpZiAoc3Bhbi5zcGFuSWQgIT09IHRoaXMudHJhbnNhY3Rpb25TcGFuSWQpIHtcbiAgICAgICAgICAgIC8vIFdlIHBhdGNoIHNwYW4uZmluaXNoKCkgdG8gcG9wIGFuIGFjdGl2aXR5IGFmdGVyIHNldHRpbmcgYW4gZW5kVGltZXN0YW1wLlxuICAgICAgICAgICAgc3Bhbi5maW5pc2ggPSBmdW5jdGlvbiAoZW5kVGltZXN0YW1wKSB7XG4gICAgICAgICAgICAgICAgc3Bhbi5lbmRUaW1lc3RhbXAgPSB0eXBlb2YgZW5kVGltZXN0YW1wID09PSAnbnVtYmVyJyA/IGVuZFRpbWVzdGFtcCA6IHRpbWVzdGFtcFdpdGhNcygpO1xuICAgICAgICAgICAgICAgIF90aGlzLl9wb3BBY3Rpdml0eShzcGFuLnNwYW5JZCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gV2Ugc2hvdWxkIG9ubHkgcHVzaCBuZXcgYWN0aXZpdGllcyBpZiB0aGUgc3BhbiBkb2VzIG5vdCBoYXZlIGFuIGVuZCB0aW1lc3RhbXAuXG4gICAgICAgICAgICBpZiAoc3Bhbi5lbmRUaW1lc3RhbXAgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3B1c2hBY3Rpdml0eShzcGFuLnNwYW5JZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5hZGQuY2FsbCh0aGlzLCBzcGFuKTtcbiAgICB9O1xuICAgIHJldHVybiBJZGxlVHJhbnNhY3Rpb25TcGFuUmVjb3JkZXI7XG59KFNwYW5SZWNvcmRlcikpO1xuZXhwb3J0IHsgSWRsZVRyYW5zYWN0aW9uU3BhblJlY29yZGVyIH07XG4vKipcbiAqIEFuIElkbGVUcmFuc2FjdGlvbiBpcyBhIHRyYW5zYWN0aW9uIHRoYXQgYXV0b21hdGljYWxseSBmaW5pc2hlcy4gSXQgZG9lcyB0aGlzIGJ5IHRyYWNraW5nIGNoaWxkIHNwYW5zIGFzIGFjdGl2aXRpZXMuXG4gKiBZb3UgY2FuIGhhdmUgbXVsdGlwbGUgSWRsZVRyYW5zYWN0aW9ucyBhY3RpdmUsIGJ1dCBpZiB0aGUgYG9uU2NvcGVgIG9wdGlvbiBpcyBzcGVjaWZpZWQsIHRoZSBpZGxlIHRyYW5zYWN0aW9uIHdpbGxcbiAqIHB1dCBpdHNlbGYgb24gdGhlIHNjb3BlIG9uIGNyZWF0aW9uLlxuICovXG52YXIgSWRsZVRyYW5zYWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhJZGxlVHJhbnNhY3Rpb24sIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gSWRsZVRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uQ29udGV4dCwgX2lkbGVIdWIsIFxuICAgIC8vIFRoZSB0aW1lIHRvIHdhaXQgaW4gbXMgdW50aWwgdGhlIGlkbGUgdHJhbnNhY3Rpb24gd2lsbCBiZSBmaW5pc2hlZC4gRGVmYXVsdDogMTAwMFxuICAgIF9pZGxlVGltZW91dCwgXG4gICAgLy8gSWYgYW4gaWRsZSB0cmFuc2FjdGlvbiBzaG91bGQgYmUgcHV0IGl0c2VsZiBvbiBhbmQgb2ZmIHRoZSBzY29wZSBhdXRvbWF0aWNhbGx5LlxuICAgIF9vblNjb3BlKSB7XG4gICAgICAgIGlmIChfaWRsZVRpbWVvdXQgPT09IHZvaWQgMCkgeyBfaWRsZVRpbWVvdXQgPSBERUZBVUxUX0lETEVfVElNRU9VVDsgfVxuICAgICAgICBpZiAoX29uU2NvcGUgPT09IHZvaWQgMCkgeyBfb25TY29wZSA9IGZhbHNlOyB9XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHRyYW5zYWN0aW9uQ29udGV4dCwgX2lkbGVIdWIpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLl9pZGxlSHViID0gX2lkbGVIdWI7XG4gICAgICAgIF90aGlzLl9pZGxlVGltZW91dCA9IF9pZGxlVGltZW91dDtcbiAgICAgICAgX3RoaXMuX29uU2NvcGUgPSBfb25TY29wZTtcbiAgICAgICAgLy8gQWN0aXZpdGllcyBzdG9yZSBhIGxpc3Qgb2YgYWN0aXZlIHNwYW5zXG4gICAgICAgIF90aGlzLmFjdGl2aXRpZXMgPSB7fTtcbiAgICAgICAgLy8gU3RvcmVzIHJlZmVyZW5jZSB0byB0aGUgdGltZW91dCB0aGF0IGNhbGxzIF9iZWF0KCkuXG4gICAgICAgIF90aGlzLl9oZWFydGJlYXRUaW1lciA9IDA7XG4gICAgICAgIC8vIEFtb3VudCBvZiB0aW1lcyBoZWFydGJlYXQgaGFzIGNvdW50ZWQuIFdpbGwgY2F1c2UgdHJhbnNhY3Rpb24gdG8gZmluaXNoIGFmdGVyIDMgYmVhdHMuXG4gICAgICAgIF90aGlzLl9oZWFydGJlYXRDb3VudGVyID0gMDtcbiAgICAgICAgLy8gV2Ugc2hvdWxkIG5vdCB1c2UgaGVhcnRiZWF0IGlmIHdlIGZpbmlzaGVkIGEgdHJhbnNhY3Rpb25cbiAgICAgICAgX3RoaXMuX2ZpbmlzaGVkID0gZmFsc2U7XG4gICAgICAgIF90aGlzLl9iZWZvcmVGaW5pc2hDYWxsYmFja3MgPSBbXTtcbiAgICAgICAgaWYgKF9pZGxlSHViICYmIF9vblNjb3BlKSB7XG4gICAgICAgICAgICAvLyBUaGVyZSBzaG91bGQgb25seSBiZSBvbmUgYWN0aXZlIHRyYW5zYWN0aW9uIG9uIHRoZSBzY29wZVxuICAgICAgICAgICAgY2xlYXJBY3RpdmVUcmFuc2FjdGlvbihfaWRsZUh1Yik7XG4gICAgICAgICAgICAvLyBXZSBzZXQgdGhlIHRyYW5zYWN0aW9uIGhlcmUgb24gdGhlIHNjb3BlIHNvIGVycm9yIGV2ZW50cyBwaWNrIHVwIHRoZSB0cmFjZVxuICAgICAgICAgICAgLy8gY29udGV4dCBhbmQgYXR0YWNoIGl0IHRvIHRoZSBlcnJvci5cbiAgICAgICAgICAgIGxvZ2dlci5sb2coXCJTZXR0aW5nIGlkbGUgdHJhbnNhY3Rpb24gb24gc2NvcGUuIFNwYW4gSUQ6IFwiICsgX3RoaXMuc3BhbklkKTtcbiAgICAgICAgICAgIF9pZGxlSHViLmNvbmZpZ3VyZVNjb3BlKGZ1bmN0aW9uIChzY29wZSkgeyByZXR1cm4gc2NvcGUuc2V0U3BhbihfdGhpcyk7IH0pO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzLl9pbml0VGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCFfdGhpcy5fZmluaXNoZWQpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5maW5pc2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgX3RoaXMuX2lkbGVUaW1lb3V0KTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKioge0Bpbmhlcml0RG9jfSAqL1xuICAgIElkbGVUcmFuc2FjdGlvbi5wcm90b3R5cGUuZmluaXNoID0gZnVuY3Rpb24gKGVuZFRpbWVzdGFtcCkge1xuICAgICAgICB2YXIgZV8xLCBfYTtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKGVuZFRpbWVzdGFtcCA9PT0gdm9pZCAwKSB7IGVuZFRpbWVzdGFtcCA9IHRpbWVzdGFtcFdpdGhNcygpOyB9XG4gICAgICAgIHRoaXMuX2ZpbmlzaGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5hY3Rpdml0aWVzID0ge307XG4gICAgICAgIGlmICh0aGlzLnNwYW5SZWNvcmRlcikge1xuICAgICAgICAgICAgbG9nZ2VyLmxvZygnW1RyYWNpbmddIGZpbmlzaGluZyBJZGxlVHJhbnNhY3Rpb24nLCBuZXcgRGF0ZShlbmRUaW1lc3RhbXAgKiAxMDAwKS50b0lTT1N0cmluZygpLCB0aGlzLm9wKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyh0aGlzLl9iZWZvcmVGaW5pc2hDYWxsYmFja3MpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IF9jLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayh0aGlzLCBlbmRUaW1lc3RhbXApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2IucmV0dXJuKSkgX2EuY2FsbChfYik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc3BhblJlY29yZGVyLnNwYW5zID0gdGhpcy5zcGFuUmVjb3JkZXIuc3BhbnMuZmlsdGVyKGZ1bmN0aW9uIChzcGFuKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgd2UgYXJlIGRlYWxpbmcgd2l0aCB0aGUgdHJhbnNhY3Rpb24gaXRzZWxmLCB3ZSBqdXN0IHJldHVybiBpdFxuICAgICAgICAgICAgICAgIGlmIChzcGFuLnNwYW5JZCA9PT0gX3RoaXMuc3BhbklkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBXZSBjYW5jZWwgYWxsIHBlbmRpbmcgc3BhbnMgd2l0aCBzdGF0dXMgXCJjYW5jZWxsZWRcIiB0byBpbmRpY2F0ZSB0aGUgaWRsZSB0cmFuc2FjdGlvbiB3YXMgZmluaXNoZWQgZWFybHlcbiAgICAgICAgICAgICAgICBpZiAoIXNwYW4uZW5kVGltZXN0YW1wKSB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4uZW5kVGltZXN0YW1wID0gZW5kVGltZXN0YW1wO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnNldFN0YXR1cyhTcGFuU3RhdHVzLkNhbmNlbGxlZCk7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5sb2coJ1tUcmFjaW5nXSBjYW5jZWxsaW5nIHNwYW4gc2luY2UgdHJhbnNhY3Rpb24gZW5kZWQgZWFybHknLCBKU09OLnN0cmluZ2lmeShzcGFuLCB1bmRlZmluZWQsIDIpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGtlZXBTcGFuID0gc3Bhbi5zdGFydFRpbWVzdGFtcCA8IGVuZFRpbWVzdGFtcDtcbiAgICAgICAgICAgICAgICBpZiAoIWtlZXBTcGFuKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5sb2coJ1tUcmFjaW5nXSBkaXNjYXJkaW5nIFNwYW4gc2luY2UgaXQgaGFwcGVuZWQgYWZ0ZXIgVHJhbnNhY3Rpb24gd2FzIGZpbmlzaGVkJywgSlNPTi5zdHJpbmdpZnkoc3BhbiwgdW5kZWZpbmVkLCAyKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBrZWVwU3BhbjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbG9nZ2VyLmxvZygnW1RyYWNpbmddIGZsdXNoaW5nIElkbGVUcmFuc2FjdGlvbicpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbG9nZ2VyLmxvZygnW1RyYWNpbmddIE5vIGFjdGl2ZSBJZGxlVHJhbnNhY3Rpb24nKTtcbiAgICAgICAgfVxuICAgICAgICAvLyB0aGlzLl9vblNjb3BlIGlzIHRydWUgaWYgdGhlIHRyYW5zYWN0aW9uIHdhcyBwcmV2aW91c2x5IG9uIHRoZSBzY29wZS5cbiAgICAgICAgaWYgKHRoaXMuX29uU2NvcGUpIHtcbiAgICAgICAgICAgIGNsZWFyQWN0aXZlVHJhbnNhY3Rpb24odGhpcy5faWRsZUh1Yik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuZmluaXNoLmNhbGwodGhpcywgZW5kVGltZXN0YW1wKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVyIGEgY2FsbGJhY2sgZnVuY3Rpb24gdGhhdCBnZXRzIGV4Y2VjdXRlZCBiZWZvcmUgdGhlIHRyYW5zYWN0aW9uIGZpbmlzaGVzLlxuICAgICAqIFVzZWZ1bCBmb3IgY2xlYW51cCBvciBpZiB5b3Ugd2FudCB0byBhZGQgYW55IGFkZGl0aW9uYWwgc3BhbnMgYmFzZWQgb24gY3VycmVudCBjb250ZXh0LlxuICAgICAqXG4gICAgICogVGhpcyBpcyBleHBvc2VkIGJlY2F1c2UgdXNlcnMgaGF2ZSBubyBvdGhlciB3YXkgb2YgcnVubmluZyBzb21ldGhpbmcgYmVmb3JlIGFuIGlkbGUgdHJhbnNhY3Rpb25cbiAgICAgKiBmaW5pc2hlcy5cbiAgICAgKi9cbiAgICBJZGxlVHJhbnNhY3Rpb24ucHJvdG90eXBlLnJlZ2lzdGVyQmVmb3JlRmluaXNoQ2FsbGJhY2sgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5fYmVmb3JlRmluaXNoQ2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGluaGVyaXREb2NcbiAgICAgKi9cbiAgICBJZGxlVHJhbnNhY3Rpb24ucHJvdG90eXBlLmluaXRTcGFuUmVjb3JkZXIgPSBmdW5jdGlvbiAobWF4bGVuKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICghdGhpcy5zcGFuUmVjb3JkZXIpIHtcbiAgICAgICAgICAgIHZhciBwdXNoQWN0aXZpdHkgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuX2ZpbmlzaGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMuX3B1c2hBY3Rpdml0eShpZCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIHBvcEFjdGl2aXR5ID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLl9maW5pc2hlZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF90aGlzLl9wb3BBY3Rpdml0eShpZCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5zcGFuUmVjb3JkZXIgPSBuZXcgSWRsZVRyYW5zYWN0aW9uU3BhblJlY29yZGVyKHB1c2hBY3Rpdml0eSwgcG9wQWN0aXZpdHksIHRoaXMuc3BhbklkLCBtYXhsZW4pO1xuICAgICAgICAgICAgLy8gU3RhcnQgaGVhcnRiZWF0IHNvIHRoYXQgdHJhbnNhY3Rpb25zIGRvIG5vdCBydW4gZm9yZXZlci5cbiAgICAgICAgICAgIGxvZ2dlci5sb2coJ1N0YXJ0aW5nIGhlYXJ0YmVhdCcpO1xuICAgICAgICAgICAgdGhpcy5fcGluZ0hlYXJ0YmVhdCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3BhblJlY29yZGVyLmFkZCh0aGlzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFN0YXJ0IHRyYWNraW5nIGEgc3BlY2lmaWMgYWN0aXZpdHkuXG4gICAgICogQHBhcmFtIHNwYW5JZCBUaGUgc3BhbiBpZCB0aGF0IHJlcHJlc2VudHMgdGhlIGFjdGl2aXR5XG4gICAgICovXG4gICAgSWRsZVRyYW5zYWN0aW9uLnByb3RvdHlwZS5fcHVzaEFjdGl2aXR5ID0gZnVuY3Rpb24gKHNwYW5JZCkge1xuICAgICAgICBpZiAodGhpcy5faW5pdFRpbWVvdXQpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl9pbml0VGltZW91dCk7XG4gICAgICAgICAgICB0aGlzLl9pbml0VGltZW91dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBsb2dnZXIubG9nKFwiW1RyYWNpbmddIHB1c2hBY3Rpdml0eTogXCIgKyBzcGFuSWQpO1xuICAgICAgICB0aGlzLmFjdGl2aXRpZXNbc3BhbklkXSA9IHRydWU7XG4gICAgICAgIGxvZ2dlci5sb2coJ1tUcmFjaW5nXSBuZXcgYWN0aXZpdGllcyBjb3VudCcsIE9iamVjdC5rZXlzKHRoaXMuYWN0aXZpdGllcykubGVuZ3RoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhbiBhY3Rpdml0eSBmcm9tIHVzYWdlXG4gICAgICogQHBhcmFtIHNwYW5JZCBUaGUgc3BhbiBpZCB0aGF0IHJlcHJlc2VudHMgdGhlIGFjdGl2aXR5XG4gICAgICovXG4gICAgSWRsZVRyYW5zYWN0aW9uLnByb3RvdHlwZS5fcG9wQWN0aXZpdHkgPSBmdW5jdGlvbiAoc3BhbklkKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICh0aGlzLmFjdGl2aXRpZXNbc3BhbklkXSkge1xuICAgICAgICAgICAgbG9nZ2VyLmxvZyhcIltUcmFjaW5nXSBwb3BBY3Rpdml0eSBcIiArIHNwYW5JZCk7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWR5bmFtaWMtZGVsZXRlXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5hY3Rpdml0aWVzW3NwYW5JZF07XG4gICAgICAgICAgICBsb2dnZXIubG9nKCdbVHJhY2luZ10gbmV3IGFjdGl2aXRpZXMgY291bnQnLCBPYmplY3Qua2V5cyh0aGlzLmFjdGl2aXRpZXMpLmxlbmd0aCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMuYWN0aXZpdGllcykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB2YXIgdGltZW91dCA9IHRoaXMuX2lkbGVUaW1lb3V0O1xuICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBhZGQgdGhlIHRpbWVvdXQgaGVyZSB0byBoYXZlIHRoZSByZWFsIGVuZHRpbWVzdGFtcCBvZiB0aGUgdHJhbnNhY3Rpb25cbiAgICAgICAgICAgIC8vIFJlbWVtYmVyIHRpbWVzdGFtcFdpdGhNcyBpcyBpbiBzZWNvbmRzLCB0aW1lb3V0IGlzIGluIG1zXG4gICAgICAgICAgICB2YXIgZW5kXzEgPSB0aW1lc3RhbXBXaXRoTXMoKSArIHRpbWVvdXQgLyAxMDAwO1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5fZmluaXNoZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZmluaXNoKGVuZF8xKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCB0aW1lb3V0KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIHdoZW4gZW50cmllcyBvZiB0aGlzLmFjdGl2aXRpZXMgYXJlIG5vdCBjaGFuZ2luZyBmb3IgMyBiZWF0cy5cbiAgICAgKiBJZiB0aGlzIG9jY3VycyB3ZSBmaW5pc2ggdGhlIHRyYW5zYWN0aW9uLlxuICAgICAqL1xuICAgIElkbGVUcmFuc2FjdGlvbi5wcm90b3R5cGUuX2JlYXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl9oZWFydGJlYXRUaW1lcik7XG4gICAgICAgIC8vIFdlIHNob3VsZCBub3QgYmUgcnVubmluZyBoZWFydGJlYXQgaWYgdGhlIGlkbGUgdHJhbnNhY3Rpb24gaXMgZmluaXNoZWQuXG4gICAgICAgIGlmICh0aGlzLl9maW5pc2hlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXModGhpcy5hY3Rpdml0aWVzKTtcbiAgICAgICAgdmFyIGhlYXJ0YmVhdFN0cmluZyA9IGtleXMubGVuZ3RoID8ga2V5cy5yZWR1Y2UoZnVuY3Rpb24gKHByZXYsIGN1cnJlbnQpIHsgcmV0dXJuIHByZXYgKyBjdXJyZW50OyB9KSA6ICcnO1xuICAgICAgICBpZiAoaGVhcnRiZWF0U3RyaW5nID09PSB0aGlzLl9wcmV2SGVhcnRiZWF0U3RyaW5nKSB7XG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRDb3VudGVyICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRDb3VudGVyID0gMTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9wcmV2SGVhcnRiZWF0U3RyaW5nID0gaGVhcnRiZWF0U3RyaW5nO1xuICAgICAgICBpZiAodGhpcy5faGVhcnRiZWF0Q291bnRlciA+PSAzKSB7XG4gICAgICAgICAgICBsb2dnZXIubG9nKFwiW1RyYWNpbmddIFRyYW5zYWN0aW9uIGZpbmlzaGVkIGJlY2F1c2Ugb2Ygbm8gY2hhbmdlIGZvciAzIGhlYXJ0IGJlYXRzXCIpO1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0dXMoU3BhblN0YXR1cy5EZWFkbGluZUV4Y2VlZGVkKTtcbiAgICAgICAgICAgIHRoaXMuc2V0VGFnKCdoZWFydGJlYXQnLCAnZmFpbGVkJyk7XG4gICAgICAgICAgICB0aGlzLmZpbmlzaCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fcGluZ0hlYXJ0YmVhdCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBQaW5ncyB0aGUgaGVhcnRiZWF0XG4gICAgICovXG4gICAgSWRsZVRyYW5zYWN0aW9uLnByb3RvdHlwZS5fcGluZ0hlYXJ0YmVhdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgbG9nZ2VyLmxvZyhcInBpbmdpbmcgSGVhcnRiZWF0IC0+IGN1cnJlbnQgY291bnRlcjogXCIgKyB0aGlzLl9oZWFydGJlYXRDb3VudGVyKTtcbiAgICAgICAgdGhpcy5faGVhcnRiZWF0VGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLl9iZWF0KCk7XG4gICAgICAgIH0sIDUwMDApO1xuICAgIH07XG4gICAgcmV0dXJuIElkbGVUcmFuc2FjdGlvbjtcbn0oVHJhbnNhY3Rpb24pKTtcbmV4cG9ydCB7IElkbGVUcmFuc2FjdGlvbiB9O1xuLyoqXG4gKiBSZXNldCBhY3RpdmUgdHJhbnNhY3Rpb24gb24gc2NvcGVcbiAqL1xuZnVuY3Rpb24gY2xlYXJBY3RpdmVUcmFuc2FjdGlvbihodWIpIHtcbiAgICBpZiAoaHViKSB7XG4gICAgICAgIHZhciBzY29wZSA9IGh1Yi5nZXRTY29wZSgpO1xuICAgICAgICBpZiAoc2NvcGUpIHtcbiAgICAgICAgICAgIHZhciB0cmFuc2FjdGlvbiA9IHNjb3BlLmdldFRyYW5zYWN0aW9uKCk7XG4gICAgICAgICAgICBpZiAodHJhbnNhY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBzY29wZS5zZXRTcGFuKHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pZGxldHJhbnNhY3Rpb24uanMubWFwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///54\n')},89:function(module,__webpack_exports__,__webpack_require__){"use strict";eval("/* WEBPACK VAR INJECTION */(function(module) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Postgres; });\n/* harmony import */ var _sentry_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(44);\n/* harmony import */ var _sentry_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(5);\n/* harmony import */ var _sentry_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(13);\n\n/** Tracing integration for node-postgres package */\nvar Postgres = /** @class */ (function () {\n    function Postgres() {\n        /**\n         * @inheritDoc\n         */\n        this.name = Postgres.id;\n    }\n    /**\n     * @inheritDoc\n     */\n    Postgres.prototype.setupOnce = function (_, getCurrentHub) {\n        var client;\n        try {\n            var pgModule = Object(_sentry_utils__WEBPACK_IMPORTED_MODULE_0__[/* dynamicRequire */ \"a\"])(module, 'pg');\n            client = pgModule.Client;\n        }\n        catch (e) {\n            _sentry_utils__WEBPACK_IMPORTED_MODULE_1__[/* logger */ \"a\"].error('Postgres Integration was unable to require `pg` package.');\n            return;\n        }\n        /**\n         * function (query, callback) => void\n         * function (query, params, callback) => void\n         * function (query) => Promise\n         * function (query, params) => Promise\n         */\n        Object(_sentry_utils__WEBPACK_IMPORTED_MODULE_2__[/* fill */ \"c\"])(client.prototype, 'query', function (orig) {\n            return function (config, values, callback) {\n                var _a, _b;\n                var scope = getCurrentHub().getScope();\n                var parentSpan = (_a = scope) === null || _a === void 0 ? void 0 : _a.getSpan();\n                var span = (_b = parentSpan) === null || _b === void 0 ? void 0 : _b.startChild({\n                    description: typeof config === 'string' ? config : config.text,\n                    op: \"db\",\n                });\n                if (typeof callback === 'function') {\n                    return orig.call(this, config, values, function (err, result) {\n                        var _a;\n                        (_a = span) === null || _a === void 0 ? void 0 : _a.finish();\n                        callback(err, result);\n                    });\n                }\n                if (typeof values === 'function') {\n                    return orig.call(this, config, function (err, result) {\n                        var _a;\n                        (_a = span) === null || _a === void 0 ? void 0 : _a.finish();\n                        values(err, result);\n                    });\n                }\n                return orig.call(this, config, values).then(function (res) {\n                    var _a;\n                    (_a = span) === null || _a === void 0 ? void 0 : _a.finish();\n                    return res;\n                });\n            };\n        });\n    };\n    /**\n     * @inheritDoc\n     */\n    Postgres.id = 'Postgres';\n    return Postgres;\n}());\n\n//# sourceMappingURL=postgres.js.map\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(61)(module)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHNlbnRyeS90cmFjaW5nL2VzbS9pbnRlZ3JhdGlvbnMvcG9zdGdyZXMuanM/MDhiYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkeW5hbWljUmVxdWlyZSwgZmlsbCwgbG9nZ2VyIH0gZnJvbSAnQHNlbnRyeS91dGlscyc7XG4vKiogVHJhY2luZyBpbnRlZ3JhdGlvbiBmb3Igbm9kZS1wb3N0Z3JlcyBwYWNrYWdlICovXG52YXIgUG9zdGdyZXMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUG9zdGdyZXMoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaW5oZXJpdERvY1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5uYW1lID0gUG9zdGdyZXMuaWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbmhlcml0RG9jXG4gICAgICovXG4gICAgUG9zdGdyZXMucHJvdG90eXBlLnNldHVwT25jZSA9IGZ1bmN0aW9uIChfLCBnZXRDdXJyZW50SHViKSB7XG4gICAgICAgIHZhciBjbGllbnQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgcGdNb2R1bGUgPSBkeW5hbWljUmVxdWlyZShtb2R1bGUsICdwZycpO1xuICAgICAgICAgICAgY2xpZW50ID0gcGdNb2R1bGUuQ2xpZW50O1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ1Bvc3RncmVzIEludGVncmF0aW9uIHdhcyB1bmFibGUgdG8gcmVxdWlyZSBgcGdgIHBhY2thZ2UuJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGZ1bmN0aW9uIChxdWVyeSwgY2FsbGJhY2spID0+IHZvaWRcbiAgICAgICAgICogZnVuY3Rpb24gKHF1ZXJ5LCBwYXJhbXMsIGNhbGxiYWNrKSA9PiB2b2lkXG4gICAgICAgICAqIGZ1bmN0aW9uIChxdWVyeSkgPT4gUHJvbWlzZVxuICAgICAgICAgKiBmdW5jdGlvbiAocXVlcnksIHBhcmFtcykgPT4gUHJvbWlzZVxuICAgICAgICAgKi9cbiAgICAgICAgZmlsbChjbGllbnQucHJvdG90eXBlLCAncXVlcnknLCBmdW5jdGlvbiAob3JpZykge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChjb25maWcsIHZhbHVlcywgY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAgICAgICAgIHZhciBzY29wZSA9IGdldEN1cnJlbnRIdWIoKS5nZXRTY29wZSgpO1xuICAgICAgICAgICAgICAgIHZhciBwYXJlbnRTcGFuID0gKF9hID0gc2NvcGUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5nZXRTcGFuKCk7XG4gICAgICAgICAgICAgICAgdmFyIHNwYW4gPSAoX2IgPSBwYXJlbnRTcGFuKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Iuc3RhcnRDaGlsZCh7XG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0eXBlb2YgY29uZmlnID09PSAnc3RyaW5nJyA/IGNvbmZpZyA6IGNvbmZpZy50ZXh0LFxuICAgICAgICAgICAgICAgICAgICBvcDogXCJkYlwiLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9yaWcuY2FsbCh0aGlzLCBjb25maWcsIHZhbHVlcywgZnVuY3Rpb24gKGVyciwgcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgICAgICAgICAoX2EgPSBzcGFuKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZmluaXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnIsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3JpZy5jYWxsKHRoaXMsIGNvbmZpZywgZnVuY3Rpb24gKGVyciwgcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgICAgICAgICAoX2EgPSBzcGFuKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZmluaXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXMoZXJyLCByZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9yaWcuY2FsbCh0aGlzLCBjb25maWcsIHZhbHVlcykudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICAgICAgKF9hID0gc3BhbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmZpbmlzaCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAaW5oZXJpdERvY1xuICAgICAqL1xuICAgIFBvc3RncmVzLmlkID0gJ1Bvc3RncmVzJztcbiAgICByZXR1cm4gUG9zdGdyZXM7XG59KCkpO1xuZXhwb3J0IHsgUG9zdGdyZXMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBvc3RncmVzLmpzLm1hcCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///89\n")},90:function(module,__webpack_exports__,__webpack_require__){"use strict";eval("/* WEBPACK VAR INJECTION */(function(module) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Mysql; });\n/* harmony import */ var _sentry_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(44);\n/* harmony import */ var _sentry_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(5);\n/* harmony import */ var _sentry_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(13);\n\n/** Tracing integration for node-mysql package */\nvar Mysql = /** @class */ (function () {\n    function Mysql() {\n        /**\n         * @inheritDoc\n         */\n        this.name = Mysql.id;\n    }\n    /**\n     * @inheritDoc\n     */\n    Mysql.prototype.setupOnce = function (_, getCurrentHub) {\n        var connection;\n        try {\n            // Unfortunatelly mysql is using some custom loading system and `Connection` is not exported directly.\n            connection = Object(_sentry_utils__WEBPACK_IMPORTED_MODULE_0__[/* dynamicRequire */ \"a\"])(module, 'mysql/lib/Connection.js');\n        }\n        catch (e) {\n            _sentry_utils__WEBPACK_IMPORTED_MODULE_1__[/* logger */ \"a\"].error('Mysql Integration was unable to require `mysql` package.');\n            return;\n        }\n        // The original function will have one of these signatures:\n        //    function (callback) => void\n        //    function (options, callback) => void\n        //    function (options, values, callback) => void\n        Object(_sentry_utils__WEBPACK_IMPORTED_MODULE_2__[/* fill */ \"c\"])(connection, 'createQuery', function (orig) {\n            return function (options, values, callback) {\n                var _a, _b;\n                var scope = getCurrentHub().getScope();\n                var parentSpan = (_a = scope) === null || _a === void 0 ? void 0 : _a.getSpan();\n                var span = (_b = parentSpan) === null || _b === void 0 ? void 0 : _b.startChild({\n                    description: typeof options === 'string' ? options : options.sql,\n                    op: \"db\",\n                });\n                if (typeof callback === 'function') {\n                    return orig.call(this, options, values, function (err, result, fields) {\n                        var _a;\n                        (_a = span) === null || _a === void 0 ? void 0 : _a.finish();\n                        callback(err, result, fields);\n                    });\n                }\n                if (typeof values === 'function') {\n                    return orig.call(this, options, function (err, result, fields) {\n                        var _a;\n                        (_a = span) === null || _a === void 0 ? void 0 : _a.finish();\n                        values(err, result, fields);\n                    });\n                }\n                return orig.call(this, options, values, callback);\n            };\n        });\n    };\n    /**\n     * @inheritDoc\n     */\n    Mysql.id = 'Mysql';\n    return Mysql;\n}());\n\n//# sourceMappingURL=mysql.js.map\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(61)(module)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHNlbnRyeS90cmFjaW5nL2VzbS9pbnRlZ3JhdGlvbnMvbXlzcWwuanM/Y2QxZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkeW5hbWljUmVxdWlyZSwgZmlsbCwgbG9nZ2VyIH0gZnJvbSAnQHNlbnRyeS91dGlscyc7XG4vKiogVHJhY2luZyBpbnRlZ3JhdGlvbiBmb3Igbm9kZS1teXNxbCBwYWNrYWdlICovXG52YXIgTXlzcWwgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTXlzcWwoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaW5oZXJpdERvY1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5uYW1lID0gTXlzcWwuaWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbmhlcml0RG9jXG4gICAgICovXG4gICAgTXlzcWwucHJvdG90eXBlLnNldHVwT25jZSA9IGZ1bmN0aW9uIChfLCBnZXRDdXJyZW50SHViKSB7XG4gICAgICAgIHZhciBjb25uZWN0aW9uO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gVW5mb3J0dW5hdGVsbHkgbXlzcWwgaXMgdXNpbmcgc29tZSBjdXN0b20gbG9hZGluZyBzeXN0ZW0gYW5kIGBDb25uZWN0aW9uYCBpcyBub3QgZXhwb3J0ZWQgZGlyZWN0bHkuXG4gICAgICAgICAgICBjb25uZWN0aW9uID0gZHluYW1pY1JlcXVpcmUobW9kdWxlLCAnbXlzcWwvbGliL0Nvbm5lY3Rpb24uanMnKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdNeXNxbCBJbnRlZ3JhdGlvbiB3YXMgdW5hYmxlIHRvIHJlcXVpcmUgYG15c3FsYCBwYWNrYWdlLicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRoZSBvcmlnaW5hbCBmdW5jdGlvbiB3aWxsIGhhdmUgb25lIG9mIHRoZXNlIHNpZ25hdHVyZXM6XG4gICAgICAgIC8vICAgIGZ1bmN0aW9uIChjYWxsYmFjaykgPT4gdm9pZFxuICAgICAgICAvLyAgICBmdW5jdGlvbiAob3B0aW9ucywgY2FsbGJhY2spID0+IHZvaWRcbiAgICAgICAgLy8gICAgZnVuY3Rpb24gKG9wdGlvbnMsIHZhbHVlcywgY2FsbGJhY2spID0+IHZvaWRcbiAgICAgICAgZmlsbChjb25uZWN0aW9uLCAnY3JlYXRlUXVlcnknLCBmdW5jdGlvbiAob3JpZykge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChvcHRpb25zLCB2YWx1ZXMsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgICAgICAgICB2YXIgc2NvcGUgPSBnZXRDdXJyZW50SHViKCkuZ2V0U2NvcGUoKTtcbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50U3BhbiA9IChfYSA9IHNjb3BlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZ2V0U3BhbigpO1xuICAgICAgICAgICAgICAgIHZhciBzcGFuID0gKF9iID0gcGFyZW50U3BhbikgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnN0YXJ0Q2hpbGQoe1xuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogdHlwZW9mIG9wdGlvbnMgPT09ICdzdHJpbmcnID8gb3B0aW9ucyA6IG9wdGlvbnMuc3FsLFxuICAgICAgICAgICAgICAgICAgICBvcDogXCJkYlwiLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9yaWcuY2FsbCh0aGlzLCBvcHRpb25zLCB2YWx1ZXMsIGZ1bmN0aW9uIChlcnIsIHJlc3VsdCwgZmllbGRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgICAgICAgICAoX2EgPSBzcGFuKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZmluaXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnIsIHJlc3VsdCwgZmllbGRzKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWVzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvcmlnLmNhbGwodGhpcywgb3B0aW9ucywgZnVuY3Rpb24gKGVyciwgcmVzdWx0LCBmaWVsZHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICAgICAgICAgIChfYSA9IHNwYW4pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5maW5pc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcyhlcnIsIHJlc3VsdCwgZmllbGRzKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBvcmlnLmNhbGwodGhpcywgb3B0aW9ucywgdmFsdWVzLCBjYWxsYmFjayk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBpbmhlcml0RG9jXG4gICAgICovXG4gICAgTXlzcWwuaWQgPSAnTXlzcWwnO1xuICAgIHJldHVybiBNeXNxbDtcbn0oKSk7XG5leHBvcnQgeyBNeXNxbCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bXlzcWwuanMubWFwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///90\n")},91:function(module,__webpack_exports__,__webpack_require__){"use strict";eval("/* WEBPACK VAR INJECTION */(function(module) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Mongo; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(0);\n/* harmony import */ var _sentry_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(44);\n/* harmony import */ var _sentry_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(5);\n/* harmony import */ var _sentry_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(13);\n/* harmony import */ var _sentry_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(6);\n\n\nvar OPERATIONS = [\n    'aggregate',\n    'bulkWrite',\n    'countDocuments',\n    'createIndex',\n    'createIndexes',\n    'deleteMany',\n    'deleteOne',\n    'distinct',\n    'drop',\n    'dropIndex',\n    'dropIndexes',\n    'estimatedDocumentCount',\n    'find',\n    'findOne',\n    'findOneAndDelete',\n    'findOneAndReplace',\n    'findOneAndUpdate',\n    'indexes',\n    'indexExists',\n    'indexInformation',\n    'initializeOrderedBulkOp',\n    'insertMany',\n    'insertOne',\n    'isCapped',\n    'mapReduce',\n    'options',\n    'parallelCollectionScan',\n    'rename',\n    'replaceOne',\n    'stats',\n    'updateMany',\n    'updateOne',\n];\n// All of the operations above take `options` and `callback` as their final parameters, but some of them\n// take additional parameters as well. For those operations, this is a map of\n// { <operation name>:  [<names of additional parameters>] }, as a way to know what to call the operation's\n// positional arguments when we add them to the span's `data` object later\nvar OPERATION_SIGNATURES = {\n    // aggregate intentionally not included because `pipeline` arguments are too complex to serialize well\n    // see https://github.com/getsentry/sentry-javascript/pull/3102\n    bulkWrite: ['operations'],\n    countDocuments: ['query'],\n    createIndex: ['fieldOrSpec'],\n    createIndexes: ['indexSpecs'],\n    deleteMany: ['filter'],\n    deleteOne: ['filter'],\n    distinct: ['key', 'query'],\n    dropIndex: ['indexName'],\n    find: ['query'],\n    findOne: ['query'],\n    findOneAndDelete: ['filter'],\n    findOneAndReplace: ['filter', 'replacement'],\n    findOneAndUpdate: ['filter', 'update'],\n    indexExists: ['indexes'],\n    insertMany: ['docs'],\n    insertOne: ['doc'],\n    mapReduce: ['map', 'reduce'],\n    rename: ['newName'],\n    replaceOne: ['filter', 'doc'],\n    updateMany: ['filter', 'update'],\n    updateOne: ['filter', 'update'],\n};\n/** Tracing integration for mongo package */\nvar Mongo = /** @class */ (function () {\n    /**\n     * @inheritDoc\n     */\n    function Mongo(options) {\n        if (options === void 0) { options = {}; }\n        /**\n         * @inheritDoc\n         */\n        this.name = Mongo.id;\n        this._operations = Array.isArray(options.operations)\n            ? options.operations\n            : OPERATIONS;\n        this._describeOperations = 'describeOperations' in options ? options.describeOperations : true;\n        this._useMongoose = !!options.useMongoose;\n    }\n    /**\n     * @inheritDoc\n     */\n    Mongo.prototype.setupOnce = function (_, getCurrentHub) {\n        var collection;\n        var moduleName = this._useMongoose ? 'mongoose' : 'mongodb';\n        try {\n            var mongodbModule = Object(_sentry_utils__WEBPACK_IMPORTED_MODULE_1__[/* dynamicRequire */ \"a\"])(module, moduleName);\n            collection = mongodbModule.Collection;\n        }\n        catch (e) {\n            _sentry_utils__WEBPACK_IMPORTED_MODULE_2__[/* logger */ \"a\"].error(\"Mongo Integration was unable to require `\" + moduleName + \"` package.\");\n            return;\n        }\n        this._instrumentOperations(collection, this._operations, getCurrentHub);\n    };\n    /**\n     * Patches original collection methods\n     */\n    Mongo.prototype._instrumentOperations = function (collection, operations, getCurrentHub) {\n        var _this = this;\n        operations.forEach(function (operation) { return _this._patchOperation(collection, operation, getCurrentHub); });\n    };\n    /**\n     * Patches original collection to utilize our tracing functionality\n     */\n    Mongo.prototype._patchOperation = function (collection, operation, getCurrentHub) {\n        if (!(operation in collection.prototype))\n            return;\n        var getSpanContext = this._getSpanContextFromOperationArguments.bind(this);\n        Object(_sentry_utils__WEBPACK_IMPORTED_MODULE_3__[/* fill */ \"c\"])(collection.prototype, operation, function (orig) {\n            return function () {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                var _a, _b, _c, _d;\n                var lastArg = args[args.length - 1];\n                var scope = getCurrentHub().getScope();\n                var parentSpan = (_a = scope) === null || _a === void 0 ? void 0 : _a.getSpan();\n                // Check if the operation was passed a callback. (mapReduce requires a different check, as\n                // its (non-callback) arguments can also be functions.)\n                if (typeof lastArg !== 'function' || (operation === 'mapReduce' && args.length === 2)) {\n                    var span_1 = (_b = parentSpan) === null || _b === void 0 ? void 0 : _b.startChild(getSpanContext(this, operation, args));\n                    var maybePromise = orig.call.apply(orig, Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __spread */ \"g\"])([this], args));\n                    if (Object(_sentry_utils__WEBPACK_IMPORTED_MODULE_4__[/* isThenable */ \"m\"])(maybePromise)) {\n                        return maybePromise.then(function (res) {\n                            var _a;\n                            (_a = span_1) === null || _a === void 0 ? void 0 : _a.finish();\n                            return res;\n                        });\n                    }\n                    else {\n                        (_c = span_1) === null || _c === void 0 ? void 0 : _c.finish();\n                        return maybePromise;\n                    }\n                }\n                var span = (_d = parentSpan) === null || _d === void 0 ? void 0 : _d.startChild(getSpanContext(this, operation, args.slice(0, -1)));\n                return orig.call.apply(orig, Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __spread */ \"g\"])([this], args.slice(0, -1), [function (err, result) {\n                        var _a;\n                        (_a = span) === null || _a === void 0 ? void 0 : _a.finish();\n                        lastArg(err, result);\n                    }]));\n            };\n        });\n    };\n    /**\n     * Form a SpanContext based on the user input to a given operation.\n     */\n    Mongo.prototype._getSpanContextFromOperationArguments = function (collection, operation, args) {\n        var data = {\n            collectionName: collection.collectionName,\n            dbName: collection.dbName,\n            namespace: collection.namespace,\n        };\n        var spanContext = {\n            op: \"db\",\n            description: operation,\n            data: data,\n        };\n        // If the operation takes no arguments besides `options` and `callback`, or if argument\n        // collection is disabled for this operation, just return early.\n        var signature = OPERATION_SIGNATURES[operation];\n        var shouldDescribe = Array.isArray(this._describeOperations)\n            ? this._describeOperations.includes(operation)\n            : this._describeOperations;\n        if (!signature || !shouldDescribe) {\n            return spanContext;\n        }\n        try {\n            // Special case for `mapReduce`, as the only one accepting functions as arguments.\n            if (operation === 'mapReduce') {\n                var _a = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __read */ \"e\"])(args, 2), map = _a[0], reduce = _a[1];\n                data[signature[0]] = typeof map === 'string' ? map : map.name || '<anonymous>';\n                data[signature[1]] = typeof reduce === 'string' ? reduce : reduce.name || '<anonymous>';\n            }\n            else {\n                for (var i = 0; i < signature.length; i++) {\n                    data[signature[i]] = JSON.stringify(args[i]);\n                }\n            }\n        }\n        catch (_oO) {\n            // no-empty\n        }\n        return spanContext;\n    };\n    /**\n     * @inheritDoc\n     */\n    Mongo.id = 'Mongo';\n    return Mongo;\n}());\n\n//# sourceMappingURL=mongo.js.map\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(61)(module)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHNlbnRyeS90cmFjaW5nL2VzbS9pbnRlZ3JhdGlvbnMvbW9uZ28uanM/ZDZhNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX3JlYWQsIF9fc3ByZWFkIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBkeW5hbWljUmVxdWlyZSwgZmlsbCwgaXNUaGVuYWJsZSwgbG9nZ2VyIH0gZnJvbSAnQHNlbnRyeS91dGlscyc7XG52YXIgT1BFUkFUSU9OUyA9IFtcbiAgICAnYWdncmVnYXRlJyxcbiAgICAnYnVsa1dyaXRlJyxcbiAgICAnY291bnREb2N1bWVudHMnLFxuICAgICdjcmVhdGVJbmRleCcsXG4gICAgJ2NyZWF0ZUluZGV4ZXMnLFxuICAgICdkZWxldGVNYW55JyxcbiAgICAnZGVsZXRlT25lJyxcbiAgICAnZGlzdGluY3QnLFxuICAgICdkcm9wJyxcbiAgICAnZHJvcEluZGV4JyxcbiAgICAnZHJvcEluZGV4ZXMnLFxuICAgICdlc3RpbWF0ZWREb2N1bWVudENvdW50JyxcbiAgICAnZmluZCcsXG4gICAgJ2ZpbmRPbmUnLFxuICAgICdmaW5kT25lQW5kRGVsZXRlJyxcbiAgICAnZmluZE9uZUFuZFJlcGxhY2UnLFxuICAgICdmaW5kT25lQW5kVXBkYXRlJyxcbiAgICAnaW5kZXhlcycsXG4gICAgJ2luZGV4RXhpc3RzJyxcbiAgICAnaW5kZXhJbmZvcm1hdGlvbicsXG4gICAgJ2luaXRpYWxpemVPcmRlcmVkQnVsa09wJyxcbiAgICAnaW5zZXJ0TWFueScsXG4gICAgJ2luc2VydE9uZScsXG4gICAgJ2lzQ2FwcGVkJyxcbiAgICAnbWFwUmVkdWNlJyxcbiAgICAnb3B0aW9ucycsXG4gICAgJ3BhcmFsbGVsQ29sbGVjdGlvblNjYW4nLFxuICAgICdyZW5hbWUnLFxuICAgICdyZXBsYWNlT25lJyxcbiAgICAnc3RhdHMnLFxuICAgICd1cGRhdGVNYW55JyxcbiAgICAndXBkYXRlT25lJyxcbl07XG4vLyBBbGwgb2YgdGhlIG9wZXJhdGlvbnMgYWJvdmUgdGFrZSBgb3B0aW9uc2AgYW5kIGBjYWxsYmFja2AgYXMgdGhlaXIgZmluYWwgcGFyYW1ldGVycywgYnV0IHNvbWUgb2YgdGhlbVxuLy8gdGFrZSBhZGRpdGlvbmFsIHBhcmFtZXRlcnMgYXMgd2VsbC4gRm9yIHRob3NlIG9wZXJhdGlvbnMsIHRoaXMgaXMgYSBtYXAgb2Zcbi8vIHsgPG9wZXJhdGlvbiBuYW1lPjogIFs8bmFtZXMgb2YgYWRkaXRpb25hbCBwYXJhbWV0ZXJzPl0gfSwgYXMgYSB3YXkgdG8ga25vdyB3aGF0IHRvIGNhbGwgdGhlIG9wZXJhdGlvbidzXG4vLyBwb3NpdGlvbmFsIGFyZ3VtZW50cyB3aGVuIHdlIGFkZCB0aGVtIHRvIHRoZSBzcGFuJ3MgYGRhdGFgIG9iamVjdCBsYXRlclxudmFyIE9QRVJBVElPTl9TSUdOQVRVUkVTID0ge1xuICAgIC8vIGFnZ3JlZ2F0ZSBpbnRlbnRpb25hbGx5IG5vdCBpbmNsdWRlZCBiZWNhdXNlIGBwaXBlbGluZWAgYXJndW1lbnRzIGFyZSB0b28gY29tcGxleCB0byBzZXJpYWxpemUgd2VsbFxuICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vZ2V0c2VudHJ5L3NlbnRyeS1qYXZhc2NyaXB0L3B1bGwvMzEwMlxuICAgIGJ1bGtXcml0ZTogWydvcGVyYXRpb25zJ10sXG4gICAgY291bnREb2N1bWVudHM6IFsncXVlcnknXSxcbiAgICBjcmVhdGVJbmRleDogWydmaWVsZE9yU3BlYyddLFxuICAgIGNyZWF0ZUluZGV4ZXM6IFsnaW5kZXhTcGVjcyddLFxuICAgIGRlbGV0ZU1hbnk6IFsnZmlsdGVyJ10sXG4gICAgZGVsZXRlT25lOiBbJ2ZpbHRlciddLFxuICAgIGRpc3RpbmN0OiBbJ2tleScsICdxdWVyeSddLFxuICAgIGRyb3BJbmRleDogWydpbmRleE5hbWUnXSxcbiAgICBmaW5kOiBbJ3F1ZXJ5J10sXG4gICAgZmluZE9uZTogWydxdWVyeSddLFxuICAgIGZpbmRPbmVBbmREZWxldGU6IFsnZmlsdGVyJ10sXG4gICAgZmluZE9uZUFuZFJlcGxhY2U6IFsnZmlsdGVyJywgJ3JlcGxhY2VtZW50J10sXG4gICAgZmluZE9uZUFuZFVwZGF0ZTogWydmaWx0ZXInLCAndXBkYXRlJ10sXG4gICAgaW5kZXhFeGlzdHM6IFsnaW5kZXhlcyddLFxuICAgIGluc2VydE1hbnk6IFsnZG9jcyddLFxuICAgIGluc2VydE9uZTogWydkb2MnXSxcbiAgICBtYXBSZWR1Y2U6IFsnbWFwJywgJ3JlZHVjZSddLFxuICAgIHJlbmFtZTogWyduZXdOYW1lJ10sXG4gICAgcmVwbGFjZU9uZTogWydmaWx0ZXInLCAnZG9jJ10sXG4gICAgdXBkYXRlTWFueTogWydmaWx0ZXInLCAndXBkYXRlJ10sXG4gICAgdXBkYXRlT25lOiBbJ2ZpbHRlcicsICd1cGRhdGUnXSxcbn07XG4vKiogVHJhY2luZyBpbnRlZ3JhdGlvbiBmb3IgbW9uZ28gcGFja2FnZSAqL1xudmFyIE1vbmdvID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBpbmhlcml0RG9jXG4gICAgICovXG4gICAgZnVuY3Rpb24gTW9uZ28ob3B0aW9ucykge1xuICAgICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7IG9wdGlvbnMgPSB7fTsgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQGluaGVyaXREb2NcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubmFtZSA9IE1vbmdvLmlkO1xuICAgICAgICB0aGlzLl9vcGVyYXRpb25zID0gQXJyYXkuaXNBcnJheShvcHRpb25zLm9wZXJhdGlvbnMpXG4gICAgICAgICAgICA/IG9wdGlvbnMub3BlcmF0aW9uc1xuICAgICAgICAgICAgOiBPUEVSQVRJT05TO1xuICAgICAgICB0aGlzLl9kZXNjcmliZU9wZXJhdGlvbnMgPSAnZGVzY3JpYmVPcGVyYXRpb25zJyBpbiBvcHRpb25zID8gb3B0aW9ucy5kZXNjcmliZU9wZXJhdGlvbnMgOiB0cnVlO1xuICAgICAgICB0aGlzLl91c2VNb25nb29zZSA9ICEhb3B0aW9ucy51c2VNb25nb29zZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGluaGVyaXREb2NcbiAgICAgKi9cbiAgICBNb25nby5wcm90b3R5cGUuc2V0dXBPbmNlID0gZnVuY3Rpb24gKF8sIGdldEN1cnJlbnRIdWIpIHtcbiAgICAgICAgdmFyIGNvbGxlY3Rpb247XG4gICAgICAgIHZhciBtb2R1bGVOYW1lID0gdGhpcy5fdXNlTW9uZ29vc2UgPyAnbW9uZ29vc2UnIDogJ21vbmdvZGInO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIG1vbmdvZGJNb2R1bGUgPSBkeW5hbWljUmVxdWlyZShtb2R1bGUsIG1vZHVsZU5hbWUpO1xuICAgICAgICAgICAgY29sbGVjdGlvbiA9IG1vbmdvZGJNb2R1bGUuQ29sbGVjdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiTW9uZ28gSW50ZWdyYXRpb24gd2FzIHVuYWJsZSB0byByZXF1aXJlIGBcIiArIG1vZHVsZU5hbWUgKyBcImAgcGFja2FnZS5cIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5faW5zdHJ1bWVudE9wZXJhdGlvbnMoY29sbGVjdGlvbiwgdGhpcy5fb3BlcmF0aW9ucywgZ2V0Q3VycmVudEh1Yik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBQYXRjaGVzIG9yaWdpbmFsIGNvbGxlY3Rpb24gbWV0aG9kc1xuICAgICAqL1xuICAgIE1vbmdvLnByb3RvdHlwZS5faW5zdHJ1bWVudE9wZXJhdGlvbnMgPSBmdW5jdGlvbiAoY29sbGVjdGlvbiwgb3BlcmF0aW9ucywgZ2V0Q3VycmVudEh1Yikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBvcGVyYXRpb25zLmZvckVhY2goZnVuY3Rpb24gKG9wZXJhdGlvbikgeyByZXR1cm4gX3RoaXMuX3BhdGNoT3BlcmF0aW9uKGNvbGxlY3Rpb24sIG9wZXJhdGlvbiwgZ2V0Q3VycmVudEh1Yik7IH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUGF0Y2hlcyBvcmlnaW5hbCBjb2xsZWN0aW9uIHRvIHV0aWxpemUgb3VyIHRyYWNpbmcgZnVuY3Rpb25hbGl0eVxuICAgICAqL1xuICAgIE1vbmdvLnByb3RvdHlwZS5fcGF0Y2hPcGVyYXRpb24gPSBmdW5jdGlvbiAoY29sbGVjdGlvbiwgb3BlcmF0aW9uLCBnZXRDdXJyZW50SHViKSB7XG4gICAgICAgIGlmICghKG9wZXJhdGlvbiBpbiBjb2xsZWN0aW9uLnByb3RvdHlwZSkpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHZhciBnZXRTcGFuQ29udGV4dCA9IHRoaXMuX2dldFNwYW5Db250ZXh0RnJvbU9wZXJhdGlvbkFyZ3VtZW50cy5iaW5kKHRoaXMpO1xuICAgICAgICBmaWxsKGNvbGxlY3Rpb24ucHJvdG90eXBlLCBvcGVyYXRpb24sIGZ1bmN0aW9uIChvcmlnKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gICAgICAgICAgICAgICAgdmFyIGxhc3RBcmcgPSBhcmdzW2FyZ3MubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgdmFyIHNjb3BlID0gZ2V0Q3VycmVudEh1YigpLmdldFNjb3BlKCk7XG4gICAgICAgICAgICAgICAgdmFyIHBhcmVudFNwYW4gPSAoX2EgPSBzY29wZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmdldFNwYW4oKTtcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgb3BlcmF0aW9uIHdhcyBwYXNzZWQgYSBjYWxsYmFjay4gKG1hcFJlZHVjZSByZXF1aXJlcyBhIGRpZmZlcmVudCBjaGVjaywgYXNcbiAgICAgICAgICAgICAgICAvLyBpdHMgKG5vbi1jYWxsYmFjaykgYXJndW1lbnRzIGNhbiBhbHNvIGJlIGZ1bmN0aW9ucy4pXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBsYXN0QXJnICE9PSAnZnVuY3Rpb24nIHx8IChvcGVyYXRpb24gPT09ICdtYXBSZWR1Y2UnICYmIGFyZ3MubGVuZ3RoID09PSAyKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3Bhbl8xID0gKF9iID0gcGFyZW50U3BhbikgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnN0YXJ0Q2hpbGQoZ2V0U3BhbkNvbnRleHQodGhpcywgb3BlcmF0aW9uLCBhcmdzKSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXliZVByb21pc2UgPSBvcmlnLmNhbGwuYXBwbHkob3JpZywgX19zcHJlYWQoW3RoaXNdLCBhcmdzKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1RoZW5hYmxlKG1heWJlUHJvbWlzZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtYXliZVByb21pc2UudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChfYSA9IHNwYW5fMSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmZpbmlzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIChfYyA9IHNwYW5fMSkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLmZpbmlzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1heWJlUHJvbWlzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgc3BhbiA9IChfZCA9IHBhcmVudFNwYW4pID09PSBudWxsIHx8IF9kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZC5zdGFydENoaWxkKGdldFNwYW5Db250ZXh0KHRoaXMsIG9wZXJhdGlvbiwgYXJncy5zbGljZSgwLCAtMSkpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3JpZy5jYWxsLmFwcGx5KG9yaWcsIF9fc3ByZWFkKFt0aGlzXSwgYXJncy5zbGljZSgwLCAtMSksIFtmdW5jdGlvbiAoZXJyLCByZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgICAgICAgICAgICAgIChfYSA9IHNwYW4pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5maW5pc2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RBcmcoZXJyLCByZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICB9XSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBGb3JtIGEgU3BhbkNvbnRleHQgYmFzZWQgb24gdGhlIHVzZXIgaW5wdXQgdG8gYSBnaXZlbiBvcGVyYXRpb24uXG4gICAgICovXG4gICAgTW9uZ28ucHJvdG90eXBlLl9nZXRTcGFuQ29udGV4dEZyb21PcGVyYXRpb25Bcmd1bWVudHMgPSBmdW5jdGlvbiAoY29sbGVjdGlvbiwgb3BlcmF0aW9uLCBhcmdzKSB7XG4gICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgY29sbGVjdGlvbk5hbWU6IGNvbGxlY3Rpb24uY29sbGVjdGlvbk5hbWUsXG4gICAgICAgICAgICBkYk5hbWU6IGNvbGxlY3Rpb24uZGJOYW1lLFxuICAgICAgICAgICAgbmFtZXNwYWNlOiBjb2xsZWN0aW9uLm5hbWVzcGFjZSxcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHNwYW5Db250ZXh0ID0ge1xuICAgICAgICAgICAgb3A6IFwiZGJcIixcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBvcGVyYXRpb24sXG4gICAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICB9O1xuICAgICAgICAvLyBJZiB0aGUgb3BlcmF0aW9uIHRha2VzIG5vIGFyZ3VtZW50cyBiZXNpZGVzIGBvcHRpb25zYCBhbmQgYGNhbGxiYWNrYCwgb3IgaWYgYXJndW1lbnRcbiAgICAgICAgLy8gY29sbGVjdGlvbiBpcyBkaXNhYmxlZCBmb3IgdGhpcyBvcGVyYXRpb24sIGp1c3QgcmV0dXJuIGVhcmx5LlxuICAgICAgICB2YXIgc2lnbmF0dXJlID0gT1BFUkFUSU9OX1NJR05BVFVSRVNbb3BlcmF0aW9uXTtcbiAgICAgICAgdmFyIHNob3VsZERlc2NyaWJlID0gQXJyYXkuaXNBcnJheSh0aGlzLl9kZXNjcmliZU9wZXJhdGlvbnMpXG4gICAgICAgICAgICA/IHRoaXMuX2Rlc2NyaWJlT3BlcmF0aW9ucy5pbmNsdWRlcyhvcGVyYXRpb24pXG4gICAgICAgICAgICA6IHRoaXMuX2Rlc2NyaWJlT3BlcmF0aW9ucztcbiAgICAgICAgaWYgKCFzaWduYXR1cmUgfHwgIXNob3VsZERlc2NyaWJlKSB7XG4gICAgICAgICAgICByZXR1cm4gc3BhbkNvbnRleHQ7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgYG1hcFJlZHVjZWAsIGFzIHRoZSBvbmx5IG9uZSBhY2NlcHRpbmcgZnVuY3Rpb25zIGFzIGFyZ3VtZW50cy5cbiAgICAgICAgICAgIGlmIChvcGVyYXRpb24gPT09ICdtYXBSZWR1Y2UnKSB7XG4gICAgICAgICAgICAgICAgdmFyIF9hID0gX19yZWFkKGFyZ3MsIDIpLCBtYXAgPSBfYVswXSwgcmVkdWNlID0gX2FbMV07XG4gICAgICAgICAgICAgICAgZGF0YVtzaWduYXR1cmVbMF1dID0gdHlwZW9mIG1hcCA9PT0gJ3N0cmluZycgPyBtYXAgOiBtYXAubmFtZSB8fCAnPGFub255bW91cz4nO1xuICAgICAgICAgICAgICAgIGRhdGFbc2lnbmF0dXJlWzFdXSA9IHR5cGVvZiByZWR1Y2UgPT09ICdzdHJpbmcnID8gcmVkdWNlIDogcmVkdWNlLm5hbWUgfHwgJzxhbm9ueW1vdXM+JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2lnbmF0dXJlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFbc2lnbmF0dXJlW2ldXSA9IEpTT04uc3RyaW5naWZ5KGFyZ3NbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoX29PKSB7XG4gICAgICAgICAgICAvLyBuby1lbXB0eVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzcGFuQ29udGV4dDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBpbmhlcml0RG9jXG4gICAgICovXG4gICAgTW9uZ28uaWQgPSAnTW9uZ28nO1xuICAgIHJldHVybiBNb25nbztcbn0oKSk7XG5leHBvcnQgeyBNb25nbyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bW9uZ28uanMubWFwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///91\n")}}]);